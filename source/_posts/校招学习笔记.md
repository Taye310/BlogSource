---
title: 校招学习笔记
date: 2019-09-16 16:41:40
mathjax: true
password: 456654
tags: 
    - 刷题
---

# 笔试

## 计算机网络

[资料](https://github.com/huihut/interview#%EF%B8%8F-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C)  
TCP创建连接：三次握手  
释放连接：四次挥手  

SSL：（Secure Socket Layer，安全套接字层），位于可靠的面向连接的网络层协议和应用层协议之间的一种协议层。SSL通过互相认证、使用数字签名确保完整性、使用加密确保私密性，以实现客户端和服务器之间的安全通讯。该协议由两层组成：SSL记录协议和SSL握手协议。  

TLS：（Transport Layer Security，传输层安全协议），用于两个应用程序之间提供保密性和数据完整性。该协议由两层组成：TLS记录协议和TLS握手协议。  

[TCP如何保证可靠性](https://www.jianshu.com/p/42dbcd39c3e7)：
* 校验和
* 确认应答与序列号
* 超时重传
* 连接管理（三次握手四次挥手）
* 流量控制
* 拥塞控制

拥塞控制：防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载。拥塞控制所要做的都有一个前提：网络能够承受现有的网络负荷。拥塞控制是一个全局性的过程，涉及到所有的主机、路由器，以及与降低网络传输性能有关的所有因素。

流量控制：指点对点通信量的控制，是端到端中的问题。流量控制所要做的就是抑制发送端发送数据的速率，以便使接收端来得及接收

发送窗口的大小等于Min[拥塞窗口，接收窗口]，因此是两种控制共同作用。

## 操作系统

操作系统中虚拟内存的作用：提供了三个重要的能力： 缓存，内存管理，内存保护  
1. 将主存视为一个存储在磁盘上的地址空间的高速缓存，在主存中只保存活动区域，并根据需要在磁盘和主存之间来回传送数据
2. 为每个进程提供了一致的地址空间，简化内存管理
3. 保护了每个进程的地址空间不被其他进程破坏

操作系统中的分页机制：
线性地址对应到物理地址使用页表，x86系统一页是4kb


## 数据库

[笔记](https://blog.csdn.net/qq_36982160/article/details/89258056)  

[事务](https://www.cnblogs.com/takumicx/p/9998844.html)：事务使系统能够更方便的进行故障恢复以及并发控制,从而保证数据库状态的一致性。

ACID，指数据库事务正确执行的四个基本要素的缩写。包含：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）。一个支持事务（Transaction）的数据库，必须要具有这四种特性，否则在事务过程（Transaction processing）当中无法保证数据的正确性，交易过程极可能达不到交易方的要求。

[BCNF（修正的第三范式3NF）](https://blog.csdn.net/qq_43079376/article/details/93647335)  

[数据库索引](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)：索引是对数据库表中一个或多个列（例如，employee表的姓氏(lname)列）的值进行排序的结构  

DML操作：是指数据操作语言，英文全称是Data Manipulation Language，用来对数据库中表的记录进行更新。关键字：插入insert，删除delete，更新update等，是对数据进行操作。
可以把 [SQL](https://www.w3school.com.cn/sql/sql_syntax.asp) 分为两个部分：数据操作语言 (DML) 和 数据定义语言 (DDL)。  

视图：是从一个或几个基本表（或视图）中导出的虚拟的表。在系统的数据字典中仅存放了视图的定义，不存放视图对应的数据。  

using关键字：[例子](https://blog.csdn.net/qq_38497266/article/details/99989291)，用于多表查询时省略相同列  

for update关键字：是一种行级锁，又叫排它锁，一旦用户对某个行施加了行级加锁，则该用户可以查询也可以更新被加锁的数据行，其它用户只能查询但不能更新被加锁的数据行  

create procedure（存储过程）：有关键字in、out、inout  

GRANT命令：GRAND privileges ON databasename.tablename TO 'username'@'host';  

* DDL（Data Definition Language）数据库定义语言
    DDL不需要commit. eg. CREATE ALTER DROP TRUNCATE COMMENT RENAME
* DML（Data Manipulation Language）数据操纵语言
    DML需要commit. eg. SELECT INSERT UPDATE DELETE MERGE CALL EXPLAIN PLAN LOCK TABLE
* DCL（Data Control Language）数据库控制语言  授权，角色控制等
    GRANT 授权, REVOKE 取消授权
* TCL（Transaction Control Language）事务控制语言
    SAVEPOINT 设置保存点, ROLLBACK  回滚, SET TRANSACTION

通过CHARINDEX如果能够找到对应的字符串，则返回该字符串位置，否则返回0。  

数据库索引作用，怎么实现的：  
高效获取数据，BTree索引、哈希索引、全文索引等  
[BST、BTree、B+Tree](https://zhuanlan.zhihu.com/p/27700617)  

### 数据库题目

表头：姓名 科目 成绩
* 统计所有科目平均分
* 请查出每个科目超出平均分的学生的信息
* 请查出语文成绩超出语文平均分的学生的信息

``` sql

create table Students
(
    Name varchar(255),
    Class varchar(255),
    Score int
);

insert into Students (Name, Class, Score) values ("AAA", "Math", 100);

select Class,avg(Score) from Students group by Class;

```



## C++

[C++ & C#/Unity notebook](https://taye310.github.io/2019/02/18/lang-notebook/)

## 数据结构与算法

[github](https://github.com/huihut/interview)  

[贪心算法实例](https://leetcode-cn.com/problems/jump-game-ii/)

[位运算相关](https://www.zhihu.com/question/38206659/answer/763034261)

（重要）单调栈：[link](https://blog.csdn.net/lucky52529/article/details/89155694)

并查集：[link1](https://zhuanlan.zhihu.com/p/93647900)  
[leetcode 990 等式方程的可满足性](https://leetcode-cn.com/problems/satisfiability-of-equality-equations/solution/deng-shi-fang-cheng-de-ke-man-zu-xing-by-leetcode-/)  
定义：根节点作为代表元，代表一类数据；每个数据都存一个自己的父节点；  
优化：由于是树形结构，肯定绕不开树的高度这个问题（越高查询效率越慢）
1. 路径压缩：查询过程中，更改节点指向，降低树高——隔代压缩/完全压缩
2. 按秩合并：秩为树高或者节点个数（1、2两种方法选一即可）
<div style="width:300px">
    {% asset_img unionfind.png %}
</div>

[线段树，有点谜](https://leetcode-cn.com/problems/maximum-subarray/solution/zui-da-zi-xu-he-by-leetcode-solution/)

**十大排序**

冒泡：两层循环，两两比较  
``` C++
template<typename T> //整数或浮点数皆可使用,若要使用类(class)或结构体(struct)时必须重载大于(>)运算符
void bubble_sort(T arr[], int len) {
        int i, j;
        for (i = 0; i < len - 1; i++)
                for (j = 0; j < len - 1 - i; j++)
                        if (arr[j] > arr[j + 1])
                                swap(arr[j], arr[j + 1]);
}
```

选择：未排序序列里找最小（大）的放到最前边  
``` C++
template<typename T> //整數或浮點數皆可使用，若要使用物件（class）時必須設定大於（>）的運算子功能
void selection_sort(std::vector<T>& arr) {
        for (int i = 0; i < arr.size() - 1; i++) {
                int min = i;
                for (int j = i + 1; j < arr.size(); j++)
                        if (arr[j] < arr[min])
                                min = j;
                std::swap(arr[i], arr[min]);
        }
}
```

插入：未排序序列的第一个，插入到已排序序列中的合适位置，已排序序列从后往前遍历arr[j+1] = arr[j]  
插排的问题在于：如果在后面来了一个特别小的元素，需要全部移动，那么排序的效率特别低。  
``` C++
void insertion_sort(int arr[],int len){
        for(int i=1;i<len;i++){
                int key=arr[i];
                int j=i-1;
                while((j>=0) && (key<arr[j])){
                        arr[j+1]=arr[j];
                        j--;
                }
                arr[j+1]=key;
        }
}
```

希尔（插入排序改进）：n个数先分n/2组(gap = n/2)，分组进行插入排序（n=10，也就是1st数和6th数一组进行插入排序，2-7，3-8，4-9，5-10），然后gap = n/4...  
``` C++
template<typename T>
void shell_sort(T array[], int length) {
    int h = 1;
    while (h < length / 3) {
        h = 3 * h + 1;
    }
    while (h >= 1) {
        for (int i = h; i < length; i++) {
            for (int j = i; j >= h && array[j] < array[j - h]; j -= h) {
                std::swap(array[j], array[j - h]);
            }
        }
        h = h / 3;
    }
}
```

快排：第一个做pivot，小于大于放左右，在迭代  
``` C++
//严蔚敏《数据结构》标准分割函数
 Paritition1(int A[], int low, int high) {
   int pivot = A[low];
   while (low < high) {
     while (low < high && A[high] >= pivot) {
       --high;
     }
     A[low] = A[high];
     while (low < high && A[low] <= pivot) {
       ++low;
     }
     A[high] = A[low];
   }
   A[low] = pivot;
   return low;
 }

 void QuickSort(int A[], int low, int high) //快排母函数
 {
   if (low < high) {
     int pivot = Paritition1(A, low, high);
     QuickSort(A, low, pivot - 1);
     QuickSort(A, pivot + 1, high);
   }
 }
```

归并：分两半，分不到不能分，在一层一层合并回来；合并的时候保证每层有序  
``` C++
void Merge(vector<int> &Array, int front, int mid, int end) {
    // preconditions:
    // Array[front...mid] is sorted
    // Array[mid+1 ... end] is sorted
    // Copy Array[front ... mid] to LeftSubArray
    // Copy Array[mid+1 ... end] to RightSubArray
    vector<int> LeftSubArray(Array.begin() + front, Array.begin() + mid + 1);
    vector<int> RightSubArray(Array.begin() + mid + 1, Array.begin() + end + 1);
    int idxLeft = 0, idxRight = 0;
    LeftSubArray.insert(LeftSubArray.end(), numeric_limits<int>::max());
    RightSubArray.insert(RightSubArray.end(), numeric_limits<int>::max());
    // Pick min of LeftSubArray[idxLeft] and RightSubArray[idxRight], and put into Array[i]
    for (int i = front; i <= end; i++) {
        if (LeftSubArray[idxLeft] < RightSubArray[idxRight]) {
            Array[i] = LeftSubArray[idxLeft];
            idxLeft++;
        } else {
            Array[i] = RightSubArray[idxRight];
            idxRight++;
        }
    }
}

void MergeSort(vector<int> &Array, int front, int end) {
    if (front >= end)
        return;
    int mid = (front + end) / 2;
    MergeSort(Array, front, mid);
    MergeSort(Array, mid + 1, end);
    Merge(Array, front, mid, end);
}
```

堆排序，构建最大/最小堆时：
1. 父结点索引：(i-1)/2（这里计算机中的除以2，省略掉小数）
2. 左孩子索引：2*i+1
3. 右孩子索引：2*i+2  

``` C++
void max_heapify(int arr[], int start, int end) {
    // 建立父節點指標和子節點指標
    int dad = start;
    int son = dad * 2 + 1;
    while (son <= end) { // 若子節點指標在範圍內才做比較
        if (son + 1 <= end && arr[son] < arr[son + 1]) // 先比較兩個子節點大小，選擇最大的
            son++;
        if (arr[dad] > arr[son]) // 如果父節點大於子節點代表調整完畢，直接跳出函數
            return;
        else { // 否則交換父子內容再繼續子節點和孫節點比較
            swap(arr[dad], arr[son]);
            dad = son;
            son = dad * 2 + 1;
        }
    }
}

void heap_sort(int arr[], int len) {
    // 初始化，i從最後一個父節點開始調整
    for (int i = len / 2 - 1; i >= 0; i--)
        max_heapify(arr, i, len - 1);
    // 先將第一個元素和已经排好的元素前一位做交換，再從新調整(刚调整的元素之前的元素)，直到排序完畢
    for (int i = len - 1; i > 0; i--) {
        swap(arr[0], arr[i]);
        max_heapify(arr, 0, i - 1);
    }
}
```

计数/桶排序  

基数排序

稳定性：稳定性是一个特别重要的评估标准。稳定的算法在排序的过程中不会改变元素彼此的位置的相对次序,反之不稳定的排序算法经常会改变这个次序,这是我们不愿意看到的。

**查找算法**


**动态规划**
[详解](https://mp.weixin.qq.com/s/yEfrTK7UhRN0XX0_FVLyGA)

**时间复杂度计算：**
[参考资料](https://blog.csdn.net/kun1280437633/article/details/80770296)  

对数阶怎么来的：循环的时候i不是+常数来的，是i=i*2这样乘来的就是对数阶复杂度了  
``` bash
for(i<100) i=i*2;
```
$i^2=100$ -> $O(log_{2}100)$ 

**二叉树计算公式总结：**  
1. n个节点的二叉树一共有((2n)!)/(n! * (n+1)!)种 [catalan数](https://blog.csdn.net/iG_xdd/article/details/79808519)
2. n层二叉树的第n层最多为2^(n-1)个
3. 二叉树节点计算公式 N = n0+n1+n2，度为0的叶子节点比度为2的节点数多一个。N=1*n1+2*n2+1
4. 对任何一棵二叉树T，如果其终端节点数为n0，度为2的节点数为n2，则n0=n2+1
5. 具有n个节点的完全二叉树的深度为log2(n + 1)

**图计算公式总结：**  
N个点的无向完全图边数为：N*（N-1）/2；  
先手获胜必须总数为奇数；  
N=1,2,3,......,9,10代入公式，为奇数的只有N=2,3,6,7,10这5个。  

> **无向图：**  
遍历：DFS用栈 / BFS用队列  
邻接矩阵法存图 占用空间与什么有关  
在无向图中，如果从顶点vi到顶点vj有路径，则称vi和vj连通。如果图中任意两个顶点之间都连通，则称该图为连通图，否则，称该图为非连通图，则其中的极大连通子图称为连通分量，这里所谓的极大是指子图中包含的顶点个数极大。  
A,边的条数为C（n,2）=n(n-1)/2  
B,G是完全图，必定是连通图。所以连通分量只有其自身  
C，G是完全图，必定是连通图  
D，每个顶点都与其余n-1个顶点相连，则n个顶点度的和为n(n-1)  

> **无向带权图的最小生成树算法——Prim及Kruskal算法思路**  
 带权图分为有向和无向，无向图的最短路径又叫做最小生成树，有prime算法和kruskal算法；有向图的最短路径算法有dijkstra算法和floyd算法。  
 [最小生成树（prime算法、kruskal算法） 和 最短路径算法（floyd、dijkstra）](https://www.cnblogs.com/aiyelinglong/archive/2012/03/26/2418707.html)  

> **广义表：**  
head() 返回列表的第一个元素；
tail() 返回列表的删去第一个元素之后的剩余列表；  

> **哈希：**  
装填因子：对5个对象进行hash,而内存中，准备了20个位置，那么还有15个空位，最后装填因子就是5/20 = 0.25，所以装填因子越小，产生冲突的可能越小。  
1、hash索引仅满足“=”、“IN”和“<=>”查询，不能使用范围查询  
因为hash索引比较的是经常hash运算之后的hash值，因此只能进行等值的过滤，不能基于范围的查找，因为经过hash算法处理后的hash值的大小关系，并不能保证与处理前的hash大小关系对应。  
2、hash索引无法被用来进行数据的排序操作  
由于hash索引中存放的都是经过hash计算之后的值，而hash值的大小关系不一定与hash计算之前的值一样，所以数据库无法利用hash索引中的值进行排序操作。  
3、对于组合索引，Hash 索引在计算 Hash 值的时候是组合索引键合并后再一起计算 Hash 值，而不是单独计算 Hash 值，所以通过组合索引的前面一个或几个索引键进行查询的时候，Hash 索引也无法被利用。  
4、Hash 索引遇到大量Hash值相等的情况后性能并不一定就会比B-Tree索引高。  
对于选择性比较低的索引键，如果创建 Hash 索引，那么将会存在大量记录指针信息存于同一个 Hash 值相关联。这样要定位某一条记录时就会非常麻烦，会浪费多次表数据的访问，而造成整体性能低下。  

> **循环队列：**  
front=rear意味着队空或者队满，再入队或者出队就要上溢或者下溢了  

> **杂项：**  
KMP算法：一种不舍弃之前匹配信息的字符串匹配算法，时间复杂度O(m+n) 其中*next[j]就是第j个元素前j-1个元素首尾重合部分个数加一*  
输出受限的双端队列,即删除限制在一端进行,而插入仍允许在两端进行.  

## 其他知识点

创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。  
结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。  
行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。  

正则表达式：

## leetcode刷题

109 有序链表转换二叉搜索树
    快慢指针加递归 每次递归，都是把链表分成两段；前面的那个链表末尾必须要加上nullptr，才算是分成了两个链表。

56  合并区间
    push_back 和 emplace_back的区别，e更好 因为少一个构造函数  
    [emplace可以直接传入构造对象需要的元素，然后自己调用其构造函数！](https://blog.csdn.net/Kprogram/article/details/82055673)  

712 两个字符串的最小ascii删除和
    DP LCS 最长公共子序列（Longest Common Sequence）
    最优子结构/重叠子问题（用dp就是查表得到的不用重新计算）

407 接雨水2

208 实现前缀树  

207 课程表  
有向无权图是否存在环，用拓扑排序（记入度、还有邻接表，然后从入度为1的点开始删边就可以了，看最后入度是否都为0）判断，还可以使用DFS

面试题41. 数据流中的中位数  
二分查找插入用到了模板函数lower_bound/upper_bound(store.begin(), store.end(), num)  
时间复杂度 $O(logN) + O(N)$ 约等于$O(N)$  
（重要）[优先队列priority_queue](https://leetcode-cn.com/problems/maximum-number-of-events-that-can-be-attended/solution/xiang-jie-you-xian-dui-lie-tan-xin-suan-fa-by-z1m/) 时间复杂度$O(logN)$ 本质上是个堆，一棵完全二叉树  
``` C++
//对于基础类型 默认是大顶堆
    priority_queue<int> a; 
    //等同于 priority_queue<int, vector<int>, less<int> > a;
     
    //      这里一定要有空格，不然成了右移运算符↓↓
    priority_queue<int, vector<int>, greater<int> > c;  //这样就是小顶堆
```

820 [单词的压缩编码](https://leetcode-cn.com/problems/short-encoding-of-words/)：字典树  

[面试题62](https://leetcode-cn.com/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/solution/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-by-lee/). 圆圈中最后剩下的数字：约瑟夫环  
``` C++
int f(int n, int m) {
    if (n == 1)
        return 0;
    int x = f(n - 1, m);
    return (m + x) % n;
}

int lastRemaining(int n, int m) {
    return f(n, m);
}
```
``` C++
int lastRemaining(int n, int m) {
        int f = 0;
        for (int i = 2; i != n + 1; ++i)
            f = (m + f) % i;
        return f;
    }
```

135 [分发糖果（头条笔试题）](https://leetcode-cn.com/problems/candy/)  

887 [鸡蛋掉落](https://leetcode-cn.com/problems/super-egg-drop/)，vivo笔试题  
第一种方法： 问题转换成dp[i][j]表示有i个鸡蛋、j次扔鸡蛋次数时可以测的最多楼层，扔鸡蛋次数最多不会超过N次（线性扫描）；所以当dp[i][j]等于N的时候j的值就是我们想要的答案  
$$dp[j][m] = dp[j - 1][m - 1] + dp[j][m-1] + 1$$

第二中状态定义和转移公式： 按着题意来dp[k][n]表示k个鸡蛋，n层楼的最少测试次数，$$dp[K,N] = 1+min_{1<=X<=N}(max(dp(K-1,X-1),dp(K,N-X)))$$  

**剑指offer系列：**  
size_t: 与int固定四个字节不同有所不同,size_t的取值range是目标平台下最大可能的数组尺寸,一些平台下size_t的范围小于int的正数范围,又或者大于unsigned int. 使用Int既有可能浪费，又有可能范围不够大。  
``` C++
string replaceSpace(string s) {
    size_t pos;
    while(true){
        pos = s.find(" ");
        if(pos<string::npos){
            s.replace(pos,1,"%20");
        }else{
            break;
        }
    }
    return s;
}
```

面试题16. 数值的整数次方： 可以用位运算，$3^5 = 3^{101_{2}} = 3^{2^2+2^0} = 9^2*3^1$  

vector的insert方法使用迭代器参数可以用来合并vector  

``` C++
while(!s.empty()&&pos<popped.size()&&popped[pos] == s.top()){//三个条件的顺序很重要
```

中序遍历用 栈  

837.新21点和 983 旅行票价 动态规划+从后遍历经典题；看起来很麻烦，代码很简单  

63.不同路径II；动态规划求解而非递归，用到了滚动数组来优化dp，滚动数组应该多看一下  

## 牛客刷题

union的大小取决于它所有的成员中，占用空间最大的一个成员的大小，并且需要内存对齐  

c++的类体中，方法以外的区域不允许有初始化，简单类型是可以的，但是有构造函数的复杂对象则不行了，比如string对象！

``` bash
error,expected identifier before numeric constant
```

### 猿辅导真题

[击鼓传花](https://www.nowcoder.com/test/question/done?tid=35339605&qid=808488#summary)，k个人传n次，最后一个人要是第一个人  
dp可以70%，要用矩阵快速幂没用过  



# 面试

项目经历的star原则 p6  

## 面试问题总结

asset bundle中多个prefab依赖了相同的资源，打包的时候是怎么避免冗余的：

interface和abstract的应用场景：is-a && has-a

[语言间相互调用：](https://gameinstitute.qq.com/community/detail/105650)

MD5（Message-Digest Algorithm 5），即消息摘要算法第五版，是一种被广泛使用的密码散列函数。散列算法的基础原理是：将数据（如一段文字）运算，变为另一段固定长度的值。MD5 可以产生出一个128位（16字节）的散列值（hash value），用于确保传输的信息完整一致。

[判断某点是否在图形内部](https://www.cnblogs.com/anningwang/p/7581545.html)：从随机点引射线，看穿过图形边的次数，偶为外，奇为内  
填充算法，dfs就是  

分别在什么时候使用引用和指针：指向的对象不为空的时候使用

为什么要分栈和对，不能合并？：栈的好处是：方便、快、有效避免内存碎片化。栈的问题是：不利于管理大内存、数据的生命周期难于控制，所以栈不利于动态地管理并且有效地利用宝贵的内存资源。于是我们有了堆  

[伽马校正（gamma correction）](https://blog.csdn.net/w450468524/article/details/51649651)：需要注意的是，像法线贴图，高光贴图等通常是在线性空间中生成的的，无需进行反伽马校正  
首先是历史遗留问题，crt显示器是非线性的，计算机中能量和颜色是线性的；其次人眼感知明暗是非线性的，所以需要gamma空间的存在  

[z-fighting](https://zhuanlan.zhihu.com/p/78769570)：模型闪烁的问题，解决办法后边有  

setpass call & batches：一次cpu把数据交给gpu处理叫一个drawcall。draw位于setpasscall 和batch中。使用相同材质信息draw call 才能放到一个batch中。一个材质球引用的shader可以有多个pass，因此携带这个材质球的物体会被渲染多次，"激活"一一个pass的过程就是set pass call。因此改变影响 pass的行为都会触发一次set pass call（比如游戏运行中开启阴影进而影响了渲染管线），因此把set pass call 作为影响drawcall的一个标准。  

如何检测内存泄漏，怎么写代码可以尽可能[避免内存泄漏](https://www.jianshu.com/p/d7a5877012e1)：  

判断内存是否泄漏的方法：
* 检查资源的使用情况，特别是纹理、网格等资源的使用
* 通过Profiler来检测WebStream或SerializedFile的使用情况
* 通过Android PSS/iOS Instrument反馈的App线程内存来查看

C#多线程  
``` C++
class A
{
    virtual int test () = 0;
}

class B : public A
{
public :
    virtual int test () {
        return 10;
    }
}
```

C#attribute  

哈希解决冲突：开放定址法，再哈希法，链地址法  
这个方法的基本思想是：当发生地址冲突时，按照某种方法继续探测哈希表中的其他存储单元，直到找到空位置为止  
链地址法解决冲突的做法是：如果哈希表空间为 0 ～ m - 1 ，设置一个由 m 个指针分量组成的一维数组 ST[ m ], 凡哈希地址为 i 的数据元素都插入到头指针为 ST[ i ] 的链表中。这种方法有点近似于邻接表的基本思想，且这种方法适合于冲突比较严重的情况  

哈希索引和b+树索引：
* 如果是等值查询，那么哈希索引明显有绝对优势，因为只需要经过一次算法即可找到相应的键值；当然了，这个前提是，键值都是唯一的。如果键值不是唯一的，就需要先找到该键所在位置，然后再根据链表往后扫描，直到找到相应的数据；
* 从示意图中也能看到，如果是范围查询检索，这时候哈希索引就毫无用武之地了，因为原先是有序的键值，经过哈希算法后，有可能变成不连续的了，就没办法再利用索引完成范围查询检索；
同理，哈希索引也没办法利用索引完成排序，以及like ‘xxx%’ 这样的部分模糊查询（这种部分模糊查询，其实本质上也是范围查询）；
* 哈希索引也不支持多列联合索引的最左匹配规则；
* B+树索引的关键字检索效率比较平均，不像B树那样波动幅度大，在有大量重复键值情况下，哈希索引的效率也是极低的，因为存在所谓的哈希碰撞问题。

C#的虚函数的override和new：前者是重写（覆盖），后者只是隐藏了父类中的虚函数，如果用父类指针指向子类对象，调用new的函数，调用的还是父类的。总结通俗的讲：new：父类看不到子类的new的新方法，子类看不到父类被new的方法， 而override: 父类和子类看到的都是子类override后的方法。

线程池的概念：避免频繁创建销毁线程，等待队列、线程管理

Unity的生命周期：awake，update，fixedupdate，lateupdate

为什么IP在网络层，TCP、UDP在传输层，它们是怎么工作的？  
ip在网络层，负责路由；tcp/udp在传输层负责一有链接或者无连接的方式传送消息

DrawCall的含义就是CPU调用图像编程接口，以命令GPU进行渲染的操作。

lua元表：设置了元表的table，如果元表的index是个table，外层表索引的数据为nil就上元表的这个index里找

fixedupdate\update\lateupdate：fixed物理相关的都放在里边，因为他是固定时间间隔（也是每帧update一次）；update是每帧一次，但是时间间隔不一定，看渲染效率；late在update之后。  

模板和宏的区别：
1. 宏是在预处理阶段处理，模板是在编译阶段处理
2. 宏不会进行类型检查，只会单纯的进行文本替换，模板会进行类型检查。比如下面代码模板就会出错，而宏不会
3. 宏直接就可以产生代码，而编译器遇到模板定义时，并不产生代码，只有当模板实例化后时才会产生代码。

协程底层实现：函数返回一个迭代器类型，函数中可以多次yield return就像数组下标一样

如何做虚拟地址映射：虚拟地址是4g，user3，kernel1，结构是页表

进程如何分配地址：堆栈、静态、常量、自由

[C++如何保证类不被继承](https://blog.csdn.net/isunbin/article/details/99568217)：借助友元来实现，因为友元这个特性是不可以被继承的。如果一个类的构造函数要借助它的友元类，那么继承了这个类的类就无法构造自己的对象。从而杜绝了被继承  
``` C++
#include <iostream>
using namespace std;
class C;
 
class BASE {
private:
    BASE() {}
    friend class C;    //设class C为class BASE的友元
};
 
class C : public virtual BASE // 虚继承很关键，让D通过偏移量来找Base，因为没有权限所以无法实例化，如果不是虚继承则可以通过C调用base的构造函数
{};
 
class D : public C 
{};
 
int main()
{
    C c;
    //D d;   不可以实例化对象
}
```

Matcap的原理并不复杂，就是使用一张中间为球面的图片作为不同法线方向的光照颜色，然后将这些颜色根据模型的法线信息渲染到相应位置。用于均一表面反射材质的着色器，在Zbrush/Mudbox等软件中被广泛运用。它借助一幅含有球面的图片作为视线空间的环境映射，计算成本非常低廉，当相机不转动时视觉效果极其出色。

计算机中的流水线：每条指令分成多步，各指令间轮转顺序执行，实现并行效果（实际还是一条条执行的）；效率瓶颈，就让每一步更细分

[帧同步与状态同步](https://blog.csdn.net/shaocize/article/details/89702151)：状态tcp，帧udp；同步每个单位的状态，单位数量增加数据量增加，帧同步同步操作，操作通过运算可以达到一致的状态（游戏逻辑执行在本地，所以不好防外挂，防的方法可以算状态hash对比，或者记录战斗数据分析），单位再多同步数据量也不会增加

udp如何避免丢包：
原因：
1. 接收端处理时间过长导致丢包
2. 发送的包巨大丢包
3. 发送的包较大，超过接受者缓存导致丢包
4. 发送的包频率太快

new和malloc的区别：  
new/delete（C++运算符）会自动调用构造函数和析构函数，底层是malloc/free（标准库函数，编译器无权控制其调用构造/析构函数），比其更智能  
失败后前者抛异常，后者返回NULL，成功返回的都是指针  

进程线程的区别：已有  

vector/set实现机制：  
vector用数组,set用的时红黑树。Vector内存分配使用的是STL的allocator分配器，采用二层分配机制，申请内存大于128K时使用malloc，小于128K时使用内存池，接着讲了一下内存池的机制，维护16个空闲链表之类的  
vector动态增加大小时，并不是在原空间之后持续新空间（因为根本无法保证原空间之后尚有可供配置的空间），而是以原大小的两倍另外配置一块较大的空间，然后将内容拷贝过来，然后才开始在原内容之后构造新元素，并释放原空间，因此，一旦引起空间重新配置，指向原vector的所有迭代器都失效了，这是程序员易犯的一个错误，务必小心  
set 底层红黑树（平衡二叉树）目的是为了高效检索

虚函数如何实现动态多态的：  
动态多态与静态多态，静态多态就是在系统编译期间就可以确定程序执行到这里将要执行哪个函数，函数的重载，对象名加点操作符执行成员函数等；
多态的实现：分为两类，编译时的多态与运行时的多态。前者在编译的过程中确定了同名的具体操作对象，而后者是在程序运行过程中才多态地确定操作所指向的对象。这种确定操作具体对象的过程就是绑定。绑定工作在编译连接阶段完成的情况为静态绑定，在程序运行过程中完成的情况是动态绑定。  
重载overload：函数名相同，但是函数参数不同。调用时根据参数的不同决定调用哪一个函数；  
多态：函数名相同，函数形参也相同。调用时根据函数类型是虚函数还是普通成员函数决定调用哪一个。  

纯虚函数的作用：向子类提供接口，定义纯虚函数的类为抽象类  

结构体和类的区别：

结构体为什么要字节对齐：

LCA算法：

### 图形学

碰撞检测：
1. 两个立方体的碰撞检测：
   1. AABB（axis-aligned bounding box，不可旋转，有向包围盒）：
   2. OBB（Oriented Bounding Box，可旋转）：
2. 球体的碰撞检测：简单，圆心距离与半径相比较
3. 三角形是否相交：遍历A的每条边，看有没有穿过B的

HDR到LDR：tonemapping（色调映射），

# 面经复盘

## 字节跳动--游戏研发

<div style="width:300px">
    {% asset_img jrtt1.jpg %}
</div>

1. 
```
指针常量：int * const p
常量指针：const int * p
```

2. 判断扇形区域内  
算两点距离（半径） 算两向量夹角  

3. 一万个球，知道圆心位置和半径，如何预处理/数据结构存储，新加球可以最少次数判断是否相交  
八叉树  

4. 4个人分100金币，第一个人怎么分半数以上人同意（智力题？）  
给第三个人一个金币，不然他一个也拿不到  

5. 无向图连通最小花费：最小生成树（prime，keruskal）//有向图最短路径（单源dijstra，多源floyd）  
prime(加点法):每次迭代选择代价最小的边对应的点，加入到最小生成树中。算法从某一个顶点s开始，逐渐长大覆盖整个连通网的所有顶点。  
kruskal(加边法):初始最小生成树边数为0，每迭代一次就选择一条满足条件的最小代价边，加入到最小生成树的边集合里。

dijkstra：类似prime  

floyd多源最短路径：动态规划Dis(i,j) = Dis(i,k) + Dis(k,j)  

6. 字符串以词为单位反转  
两个栈  

7. 顶点着色器/片元着色器作用/什么是片元  
顶点着色器：分为输入和输出两部分,负责的功能是把输入的数据进行矩阵变换位置,计算光照公式生成逐顶点颜⾊,⽣成/变换纹理坐标.并且把位置和纹理坐标这样的参数发送到片段着色器.  
片元着色器：处理由光栅化阶段生成的每个片元，最终计算出每个像素的最终颜色。归根结底，实际上就是数据的集合。这个数据集合包含每一个像素的各个颜色分量和像素透明度的值。

*光栅化*，就是计算出1920×1080这么长的RGB数组中，每一个RGB的值  
*光追raytracing*，与光栅化并列的概念，上边是三角形投影到二维空间，根据d-buffer填充像素，后者是从每个像素出发射出光线，看射到哪儿计算像素颜色

3D场景中将三角形作为基本*图元*

片元是光栅化过程的产物；光栅化是将一个图元转变为一个二维图象，二维图象上每个点都包含了颜色、深度和纹理数据，将该点和相关信息叫做一个片元  

设计模式！工厂/观察者/策略模式？  
工厂模式：调用工厂只管给个名字，工厂里根据名字实例化对应的对象（选对应接口）；解决了接口选择的问题，拓展方便。

观察者模式：mvc，子类继承一个update方法，使用者在notify所有监听的子类时调用基类update

策略模式：核心是有个context，根据构造函数实例化了strategy的具体一种子类作为context的成员，因此context.excuteStrategy()可以调用context里的特定的strategy实例的doStrategy方法

stl里的trace？  
trace()函数？调试用的

工厂模式有几种？？  
3：简单工厂/工厂模式/抽象工厂（工厂的工厂）

光照模型公式  
3D渲染中， 物体表面的光照计算公式为：  

I = 环境光(Iambient) + 漫反射光(Idiffuse) + 镜面高光(Ispecular);  

其中，环境光(ambient)计算公式为：

Iambient = Aintensity * Acolor ; (Aintensity表示环境光强度，Acolor表示环境光颜色)

漫反射光(diffuse)计算公式为：

Idiffuse = Dintensity*Dcolor*N·L ; (Dintensity表示漫反射强度，Dcolor表示漫反射光颜色，N为该点的法向量，L为光源向量) ps:点乘是投影

镜面光照(specular)计算公式为：

Ispecular = Sintensity*Scolor*(R·V)n ; (Sintensity表示镜面光照强度，Scolor表示镜面光颜色，R为光的反射向量，V为观察者向量)

综上所得：整个光照公式为：

I = Aintensity * Acolor + Dintensity*Dcolor*N.L + Sintensity*Scolor*(R.V)n ;

将一些值合并，并使用白色作为光照颜色，则上述公式可简化为：

I = A + D*N.L + (R.V)n

类的内存结构  
[link](https://blog.csdn.net/fenxinzi557/article/details/51995911)  
记得字节对齐  

cpp文件属性命令行分页栏中加入
``` bash
/d1 reportAllClassLayout
```
可以查看内存布局  
包含虚函数的类头部有虚表指针，虚表真正的位置在静态存储区  

``` C++
char c;
int i; //是8字节 因为int之前的要对齐到int的4字节
```
类中有虚函数 要+4字节 因为有虚函数表  函数本身不占字节
继承的子类要先放父类的数据拷贝  

1. 对于基类，如果有虚函数，那么先存放虚函数表指针，然后存放自己的数据成员；如果没有虚函数，那么直接存放数据成员。 
2. 对于单一继承的类对象，先存放父类的数据拷贝(包括虚函数表指针)，然后是本类的数据。 
3. 虚函数表中，先存放父类的虚函数，再存放子类的虚函数 
4. 如果重载了父类的某些虚函数，那么新的虚函数将虚函数表中父类的这些虚函数覆盖。 
5. 对于多重继承，先存放第一个父类的数据拷贝，在存放第二个父类的数据拷贝，一次类推，最后存放自己的数据成员。其中每一个父类拷贝都包含一个虚函数表指针。如果子类重载了某个父类的某个虚函数，那么该将该父类虚函数表的函数覆盖。另外，子类自己的虚函数，存储于第一个父类的虚函数表后边部分。 
6. 当对象的虚函数被调用是，编译器去查询对象的虚函数表，找到该函数，然后调用。

构造函数/析构函数/虚函数  

**在构造/析构函数中调用虚函数：** effective c++ 条款9：永远不要在构造函数或析构函数中调用虚函数

<div style="width:300px">
    {% asset_img jrtt3.jpg %}
</div>

>> 信号量  
信号量(Semaphore)，有时被称为信号灯，是在多线程环境下使用的一种设施, 它负责协调各个线程, 以保证它们能够正确、合理的使用公共资源。  

互斥量和信号量的区别：  
1. 互斥量用于线程的互斥，信号量用于线程的同步。  
这是互斥量和信号量的根本区别，也就是互斥和同步之间的区别。  
互斥：是指某一资源同时只允许一个访问者对其进行访问，具有唯一性和排它性。但互斥无法限制访问者对资源的访问顺序，即访问是无序的。  
同步：是指在互斥的基础上（大多数情况），通过其它机制实现访问者对资源的有序访问。在大多数情况下，同步已经实现了互斥，特别是所有写入资源的情况必定是互斥的。少数情况是指可以允许多个访问者同时访问资源  

2. 互斥量值只能为0/1，信号量值可以为非负整数。  
也就是说，一个互斥量只能用于一个资源的互斥访问，它不能实现多个资源的多线程互斥问题。信号量可以实现多个同类资源的多线程互斥和同步。当信号量为单值信号量是，也可以完成一个资源的互斥访问。  

3. 互斥量的加锁和解锁必须由同一线程分别对应使用，信号量可以由一个线程释放，另一个线程得到。  

[互斥锁、自旋锁、读写锁](https://blog.csdn.net/judgejames/article/details/87286397)：读写锁，读可以多线程同时占有，写只能有一个线程占有，读写不同时，还有个不加锁状态；互斥锁，一次只能一个线程拥有互斥锁，其他线程只有等待；自旋锁，特殊的互斥锁，不睡眠，循环等待，好处是节省睡眠唤醒的资源  

>> 死锁  

>> 进程和线程的区别 PCB TCB
1. 进程是资源分配的最小单位，线程是程序执行的最小单位（资源调度的最小单位）
2. 进程有自己的独立地址空间，每启动一个进程，系统就会为它分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵。
而线程是共享进程中的数据的，使用相同的地址空间，因此CPU切换一个线程的花费远比进程要小很多，同时创建一个线程的开销也比进程要小很多。
3. 线程之间的通信更方便，同一进程下的线程共享全局变量、静态变量等数据，而进程之间的通信需要以通信的方式（IPC)进行。不过如何处理好同步与互斥是编写多线程程序的难点。
4. 但是多进程程序更健壮，多线程程序只要有一个线程死掉，整个进程也死掉了，而一个进程死掉并不会对另外一个进程造成影响，因为进程有自己独立的地址空间。

<div style="width:300px">
    {% asset_img jrtt2.jpg %}
</div>
>> 80个球找轻的  

>> 64个人，提前准备名单卡片来确认是哪个人  

>> 九宫格密码解锁的所有可能，大于等于四位数

## 网易雷火--牛客网

问简历内容  
游戏内AI如何实现：有限状态机，行为树  
一个UI被点击后发生了什么：  
  
**基础相关：**  
C++虚函数机制，虚表，虚指针：  
虚函数实在派生类可以覆写的函数，虚表存在于类内存中，记录了所有虚函数，每个虚表对应一个虚指针指向它，这个指针在类的每个实例化对象中都有。  

c++规定，当一个成员函数被声明为虚函数后，其派生类中的同名函数都自动成为虚函数。因此，在子类从新声明该虚函数时，可以加，也可以不加，但习惯上每一层声明函数时都加virtual,使程序更加清晰。

构造函数可以是虚函数吗？  
不可以，虚函数调用是在部分信息下完成工作的机制，允许我们只知道接口而不知道对象的确切类型。 要创建一个对象，你需要知道对象的完整信息。 特别是，你需要知道你想要创建的确切类型。 因此，构造函数不应该被定义为虚函数。  

>> C# 内存模型 堆和栈  
[link](https://www.cnblogs.com/omg24/p/4202992.html)  
<div style="width:400px">
    {% asset_img valueandref.png %}
</div>
[link2](https://www.cnblogs.com/xiaodongy/p/7989711.html)

C# gc 值类型与引用类型  
注：Ref和Out的区别在于Ref在传递前需要初始化。  
值类型在栈上，引用类型在堆上；前者不需要gc，后者需要  
close()可以再open，dispose()后资源被标记为无用，等待gc回收  
非托管资源需要在程序中显式释放  
对象间相互引用导致了gc丧失实时性，变为不确定的方式，否则可以用引用计数这种方法判断对象是否无用  
GC清理垃圾实际上就是调用析构函数  
String对象是不可变的（只读），一旦创建不可改变，看似修改其实是返回了一个新对象  

[随机在圆上生成n个点，这n个点在同一半圆的概率是多少？](https://blog.csdn.net/zmazon/article/details/8547278)


lua闭包  
内部（子）函数可以使用外部（父）函数的局部变量
``` lua
function test()
    local i=0
    return function() --尾调用
        i+=1
        return i
    end
end
c1=test()
c2=test() --c1,c2是建立在同一个函数，同一个局部变量的不同实例上面的两个不同的闭包
          --闭包中的upvalue各自独立，调用一次test（）就会产生一个新的闭包
print(c1()) -->1
print(c1()) -->2//重复调用时每一个调用都会记住上一次调用后的值，就是说i=1了已经
print(c2())    -->1//闭包不同所以upvalue不同    
print(c2()) -->2
```

lua怎么实现面向对象  
[lua作者的方法](http://www.lua.org/pil/16.html)  
object：用table做  
    table后边也可以用冒号（是个语法糖，省了传self/this
    ```
        a.deposit(a,100) == a:deposit(100)
    ```
    ）  
    ``` lua
    function Account:withdraw (v)
        self.balance = self.balance - v
        end
    ```
class：setmetatable  
``` lua
setmetatable(a, {__index = b}) --b是object a的class
```
面向对象中继承的本质是派生类中没有的方法或者属性到基类中去找，如上a中没有的就去b中找
实现继承和重载
[风云的方法](https://blog.codingnow.com/2006/06/oo_lua.html)  
只定义一个class函数  
table [参考资料](https://www.cnblogs.com/msxh/p/8469340.html)  

关于```self.__index = self```
[参看资料](https://www.jianshu.com/p/c05ba09add81)

>> 算法：最长公共子字符串（动态规划）  
状态转移方程$dp[i,j] = dp[i+1,j+1] + 1$ 用滚动数组可以省内存，优化

>> 算法：n叉树子节点值的和最大，规则不能同时取相邻的节点  

>> 渲染管线  
1. Input Assembler Stage
这个阶段的主要目的是根据用户提供的顶点及索引信息，构建多边形，主要有点、线段、三角形。给定顶点和索引，构建多边形的方法取决于所使用的基本图元的拓扑类型（Primitive Topology）。

2. Vertex Shader Stage
这是一个完全可编程的阶段，即完全由程序员自己来实现。该阶段的核心为模型顶点的各种空间变化；
用户指定的所有顶点都是基于模型空间的，在Vertex Shader阶段，每个顶点要依次经历所有这些空间，最终转换为屏幕上对应的二维坐标，不同空间之间的切换称为“空间变换”，实现空间变换的基本工作即矩阵。

3. Hull Shader Stage、Tessellation Stage、Domain Shader Stage
这三个阶段其实共属于Tessellation Stage，即曲面细分阶段，可选阶段。这个是D3D11中刚加入的一个高级特性，主要用于如LOD（Level of Detail）技术中。

4. Geometry Shader Stage
这个也是D3D11中加入的新特性，为可选阶段。在这个阶段中，输入为一个完整的多边形，点、线段或三角形。这个阶段直接对输入的多边形进行操作，可以把其消灭，不再往下一个阶段传输；也可以衍生出新的多边形出来。总之，该阶段操作的对象是完整的多边形，相比于顶点着色阶段，其操作的对象是单个的顶点。

5. Rasterizer Stage
这个阶段属于不可编程阶段，即完全由硬件实现，主要包括：
   1. 视口变换
   2. 隐藏面消除（Backface Culling）
   3. 顶点属性的插值计算
说白了就是，三维空间的物体，放到二维屏幕上

6. Pixel Shader Stage（fragment shader片元着色器）
这个阶段也是完全可编程的一个阶段，也是跟顶点着色器阶段一样十分重要的阶段。因为在D3D11中，顶点着色器和像素着色器是程序员实现的两个最基本的阶段。
像素着色器，从名字上也很容易看出，是在像素级别上进行的计算。对于三维空间中投影到屏幕上的每一个多边形，针对其在屏幕上所覆盖的每一个像素，逐个进行像素着色计算。这一阶段接受的数据是经过插值计算后的顶点属性。输出的是颜色值，以提供给下一阶段处理。
像素着色器给程序员提供了相当多的灵活性和自由度，通过各种不同的算法来计算片段颜色以实现各种特效。

7. Output Merger Stage
这个阶段即输出片段的混合阶段。该阶段不可编程，但是高度可调节。程序员可以灵活地调整管线的状态来实现不同的特效。比如针对深度缓冲区、模板缓冲区，混合等可以有各种不同的状态。利用它们来实现各种特效后面也有特别详细的介绍。

**二面：**  
实习经历相关  

游戏框架、设计模式  

值类型与引用类型 引用类型创建慢的原因，具体到内存  

博客上的文章 提了问题  

手写二分查找  

斐波那契数列递归与非递归写法 怎么优化  

有什么要问的  

## 面经——牛客

### 游戏研发

[字节1](https://www.nowcoder.com/discuss/386400)  

[字节2](https://www.nowcoder.com/discuss/388667)  
介绍const，const修饰成员函数放哪儿？  
修饰变量，说明该变量不可以被改变；  
修饰指针，分为指向常量的指针（pointer to const）和自身是常量的指针（常量指针，const pointer）；  
修饰引用，指向常量的引用（reference to const），用于形参类型，即避免了拷贝，又避免了函数对值的修改；  
修饰成员函数（放在最后），说明该成员函数内不能修改成员变量（修饰的实际上是this，this是成员函数的调用对象）。  
const int* p是p这个指针指向的值是个常量；  
int* const p是p这个指针是个常量，但是*p何以变；  

vector内存？[如何避免vector扩容](http://c.biancheng.net/view/7397.html)？
vector对象在栈上，内容在堆上； reserve(n)强制容量为n  

函数可以返回引用吗？  
可以，函数返回值时会产生一个临时变量作为函数返回值的副本，返回引用直接返回内存  

如何进行字符串拷贝？  
strcpy
```char   *strcpy(char   *dest,char   *src);```
功能：把src所指由NULL结束的字符串复制到dest所指的数组中。  
说明：src和dest所指内存区域不可以重叠且dest必须有足够的空间来容纳src的字符串。  

进程和线程？  
进程包含线程，一个线程挂了整个进程挂，进程与进程之间不影响，进程是资源分配的最小单位，线程是资源调度的最小单位  

多线程同步？如何避免两个线程争一个资源？  
互斥锁和信号量  

[TCP UDP](https://www.cnblogs.com/fundebug/p/differences-of-tcp-and-udp.html)？  
传输层协议，tcp可靠，有链接，upd延迟低，无连接  

TCP四次挥手？（我说了个四次握手 感觉面试官楞了一下）  
断开连接，四次挥手，全双工 两次FIN（关闭连接）两次ACK（响应）  

Unity如何改变一个物体的位置 旋转？  

Unity本地坐标和世界坐标？  

Unity调整旋转需要传什么参数？参数在数学上叫做什么？（我潜意识说的欧拉角 看他点了点头）还能怎么修改？    
[四元数](https://blog.csdn.net/candycat1992/article/details/41254799)：可以跟欧拉角互相转换，四维空间向量  

了解图形学？（说只知道一点渲染管线就没问）  

如何使用协程？协程和线程区别？  
协程 IEnumerator startcoroutine  
区别在于所有协程在一个线程内完成，是比线程更轻量的异步方法，在程序层面，而线程和进程在操作系统层面  

C#拆装箱  
装拆箱其实就是值类型和引用类型两者之间的类型转换操作，引用类型（object）都是在栈上放个地址，地址指向堆上的内存  
装箱：值类型到引用类型（int->object）隐式转换  
拆箱：反之，显式  

[字节3](https://www.nowcoder.com/discuss/366357)  

[网易1](https://www.nowcoder.com/discuss/259699)  

[天美，字节创新业务，雷火](https://www.nowcoder.com/discuss/405621)

[字节，雷火，b站](https://www.nowcoder.com/discuss/384810)

[字节引擎](https://www.nowcoder.com/discuss/233959)  

[字节游戏测试](https://www.nowcoder.com/discuss/390823)  
自我介绍
tcp与udp的区别  
tcp是面向连接的，提供可靠的服务，保证数据完整性、没有重复、按顺序到达，udp无连接延迟低

[http与https的区别，https的劣势](https://blog.csdn.net/xiaoming100001/article/details/81109617)  
前者明文传输，后者可进行加密传输、身份认证  
后者降低了用户的访问速度，加重服务端压力；ca证书年费花销  

进程与线程的区别  
资源分配最小单位和资源调度最小单位，线程挂整个进程挂，进程挂对其他的没影响；线程间通讯代价小  

多态，gc  
C++在语言层面是没有gc的，但是可以通过智能指针实现；C#有

set与hashset的区别  

map与hashmap的区别  

快排的原理  

归并的原理  

多线程  

Linux的shell编程  

hashmap的查找，删除，添加的时间复杂度  


算法题：一个数组中有正数有负数（没有0），请将它排成正负相间的数组（多余的全部放后面），时间复杂度不超过O（n）;

[网易游戏后端](https://www.nowcoder.com/discuss/241040)  
8.20 一面 1h

1.介绍实习和项目

2.static变量的作用？你能想到的所有的都讲出来

3.a文件里面定义一个static b文件include a  c文件也include a 编译链接有什么问题？
会导致每个文件都有一个专属的static变量  

4.a文件定义了一个static函数，b文件想用这个函数 该怎么做？你能想到几种方法？  
套在一个普通函数里  

5.C++面向对象三大特性？虚表你怎样理解？  
封装继承多态，包含虚函数的类对象最开始会有个虚表指针，目的是父类指针指向子类对象的时候找到正确的方法进行调用

6.[如何用C实现C++这三大特性？](https://www.cnblogs.com/zzdbullet/p/10563075.html)  
struct做数据结构，函数的话传一个struct类型指针进去做this  
继承就在struct里放父类一个对象  
多态需要自己写个struct作为虚表，放到父类的struct中

7.tcp三握四挥

8.linux进程管理，介绍一下过程


二面是两个人一起面的，难度的话感觉还好 等三面了~

8.30 二面 50min

1.介绍实习和项目

2.linux内存管理，虚拟内存机制

3.lock-free的理解？cas为什么能够原子性？

4.如果很多个线程 都在并发cas 但是一直不成功，怎么办？（这个我没明白他的意思

5.内存屏障怎么理解？

6.互斥锁和自旋锁的区别？

7.互斥锁的底层原理？它不是busy-loop如何通知线程

8.自旋锁什么时候用？和cas有什么区别？

9.cas实现自旋锁

10.timewait状态

11.tcp的拥塞控制？非常详细的介绍四个算法，包括门限值怎样修改，什么时候触发快重传等这些

12.智力题 在数轴上有n个点，从中找一个点，使得该点到其他所有点的距离之和最短？并证明

13.查看一块共享内存被哪些进程持有，用什么命令？查看一个进程持有了哪些共享内存呢？

### C++后端

[腾讯字节后台开发](https://www.nowcoder.com/discuss/399967)  

[字节后端](https://www.nowcoder.com/discuss/415859)  

项目为什么选用flask这个框架，对这个框架了解多少，有哪些并发模型。  
生产者消费者模型怎么实现的。  
中间有个阻塞队列作为“仓库”
共享内存的原理和实现。
[进程间如何同步。](https://blog.csdn.net/wuhuagu_wuhuaguo/article/details/78591330)  
临界区，互斥量，信号量，事件

负载均衡的算法你了解哪些？项目中的负载均衡是怎么实现的。
一致性哈希有了解过吗？
主键索引是什么，B+树有什么好处，主键索引和普通索引有什么区别。
查询慢怎么优化。
父子进程间共享哪些资源。
多线程之间共享哪些资源。
TCP有哪些机制保证可靠传输。
接收方，窗口缓存满了会怎么样，怎么知道又有空间了，通知发送的包再丢了怎么办。
思路题：20000个高考生，分布0-750的成绩，内存足够大，怎么排序最快。
代码题：aabbcsdaddabsds一个字符串，删除所有的ab。注意：aabb->ab->null。
二面
项目介绍。
FFmpeg介绍一下。
项目的进展现在怎么样？遇到了哪些问题，系统稳定性怎么优化。
负载均衡怎么做的？怎么判断服务忙不忙。
代码题：单链表判断是否有环？若有环如何判断环的入口。
死锁的概念，避免死锁的具体方法。
缓存机制有了解吗？缓存的替换策略有哪些，说一下。
思考题：如何判断恶意刷接口的情况？记录了10T的请求记录，找出前100个高频访问用户。  

[一致性哈希](https://www.jianshu.com/p/735a3d4789fc)和普通哈希有什么区别？  
一致性哈希主要就是解决当机器减少或增加的时候，大面积的数据重新哈希的问题  
都是多个数据库服务器的情况下，普通hash增加机器时要重新哈希  

三面
项目介绍
你们数据交互主要是内存是吧，怎么设计的？
怎么监控内存有没有泄漏，服务挂了数据会丢吗？
服务之间的负载均衡是怎么做的？有哪些负载均衡算法？
CPU调度算法有哪些。
系统调用了解吗？有哪些类型。
http状态码有哪些。
http和https的区别是什么。
代码题一：判断一棵二叉树是不是以根节点为镜像的。
代码题二：实现一个队列的类，有取最大值的接口，且时间复杂度为O（1）。
家在哪儿？看你实验室做了很多算法的东西，你自己的就业方向是怎么打算的？
实习可以来北京吗？什么时候可以开始，能实习多久。  

[字节后端](https://www.nowcoder.com/discuss/415504)  

自我介绍+聊实习项目

手撕代码：排课表，有依赖，拓扑排序

数学题：两个人抛硬币，谁先抛到正面谁赢，公平吗？不公平的话先手胜率多少？怎么改规则变的公平？

数据库为什么用B+树，为什么选择一个扁平的树而不是类似二叉树，B+树的度选取有什么讲究？最后一问没想出来，面试官说和磁盘的基本单位簇的大小有关。

线程是不是越多越好？和CPU的核心数量是什么关系？线程状态？为什么会阻塞？  
不是 占用内存，切换线程也浪费cpu资源；新建、就绪、运行、阻塞（回到就绪）、死亡

还有一些基础记不起来了。。。

五分钟后二面

二面
聊项目

Java并发，哪些集合线程安全，原理。。。这里问了很多，差不多线程有关的都过了一遍。。。

输入url后的过程，浏览器是怎么渲染页面的？

数据库为什么需要，联合索引，MVCC

智力题：1000个人，10个试管，测新冠。讲了两个方法，一个是2进制表示，一个二分。

代码：下一个字典序

二面面了将近1个半，好多内容记不清楚了。。。

4.20三面
自我介绍+项目

单例各种写法

双线程交替输出，要现场跑

设计短网址（之前了解过，但答的不算好）

平常咋学习

### 银行面经

[招商信用卡中心后台开发实习](https://www.nowcoder.com/discuss/426131)  
作者：alanpeng
链接：https://www.nowcoder.com/discuss/426131?type=post&order=time&pos=&page=0&channel=&source_id=1_post
来源：牛客网

4.21 招行信用卡中心 一面 牛客视频 17:00 30min

自我介绍  
项目介绍，问项目  
转java可以吗  
进程间通信的方式  
管道，信号量，共享内存，socket套接字，消息队列  

线程同步的方式  
临界区、信号量、事件、互斥量  

死锁的四个条件  
原因：1.系统资源不足 2.进程运行推进顺序不合适 3.资源分配不当  
必要条件：1.互斥条件 2.请求与保持条件 3.不剥夺条件 4.循环等待条件  

[内核线程与用户线程的区别](https://www.cnblogs.com/gizing/p/10925286.html)  
处于用户态执行时，进程所能访问的内存空间和对象受到限制，其所处于占有的处理器是可被抢占的
处于内核态执行时，则能访问所有的内存空间和对象，且所占有的处理器是不允许被抢占的。  

内核线程：线程切换由内核控制，切换的时候来，要从源用户态进入内核态，切换完毕要从内核态返回用户态；可以很好的利用百smp，即利用多核cpu。windows线程就是这样的。
用户级线程：用户态程序自己调度线度程切换问，不需要内核干涉，少了进出内核态的消耗，但不能很好的利用smp。答目前linux pthread大体是这么做的。  

[线程的具体执行过程](https://blog.csdn.net/a314774167/article/details/81292981)  
新建->就绪->运行->阻塞（等待阻塞、同步阻塞、其他阻塞）->死亡  

[cpu调度算法](https://blog.csdn.net/Ciellee/article/details/88783635)  
先来先服务调度（First Come First Serve）、短作业优先调度 （Short Job First）、响应比高者优先调度算法、优先数调度算法、循环轮转调度法（Round-Robin）  

[线程sleep和wait方法作用和区别](https://blog.csdn.net/u011028345/article/details/73351070)  
是否占用cpu，sleep是占着cpu睡觉

页面置换算法、LRU的底层实现（哈希表和双向链表）  
内存管理的算法。

TCP三次握手过程
长连接的保活机制、心跳包
怎么处理已经失效的连接
http的几种请求方式、GET/POST/PUT的区别
开放题：12306为什么不买很多服务器，但是抢票的时候还是不卡？（扯CAP，最后面试官说其实不买很多服务器的原因是一年抢票也就那么几次，考虑投入使用比）
高可用性的秒杀系统是怎么样的、使用情景（CAP舍弃C）
还投了哪些公司？拿到了哪些offer？怎么看互联网和银行、怎么选择？
反问
4.24 招行信用卡中心 二面 qq视频 11:00 30min

自我介绍
项目介绍、问项目
TCP三次握手四次挥手过程
最大堆、创建过程、堆排序
文件系统的索引用的什么数据结构
讲一下B+树，为什么效率高，为什么不用哈希表
java的(...)你知道吗（不知道）
日常生活问题
当班长怎么组织活动、具体步骤、有问题怎么解决
语言选择、城市选择
反问

### 其他研发

[趋势科技广联达后台](https://www.nowcoder.com/discuss/183215)  

1. 笔试题第二题思路

2. c 面向对象说一下  
封装：数据和逻辑绑定；继承：对象产生父子关系，共用属性和方法；多态，静态多态（相同函数不同的参数）和动态多态（虚函数）

3. 虚函数怎么实现的
有虚函数的表会在最前边放个虚函数表，每个实例会根据虚函数表调用正确的方法

4. 如果不用指针和引用，子类赋值给父类，会不会引发动态绑定，为什么？
静态绑定：绑定的是静态类型，所对应的函数或属性依赖于对象的静态类型，发生在编译期；  
动态绑定：绑定的是动态类型，所对应的函数或属性依赖于对象的动态类型，发生在运行期；  
不会，因为对象的类型是确定，在**编译期**就确定了，指针或引用是在**运行期**根据他们绑定的具体对象确定  

5. vector底层工作原理
数组，每次容量到上线就翻倍增加（开辟新空间再复制）  

6. 讲项目

7. 讲讲最小二乘
它的主要思想就是选择未知参数，使得理论值与观测值之差的平方和达到最小  

8. 为什么采用最小二乘法而不用你一开始说的三次样条

9.  近处用一次函数拟合，远处用高次函数拟合，你怎么判决这个边界的

10. 算法了解哪些

11. 动态规划和贪心算法有啥区别，分别举个栗子

12. 贪心算法有什么缺点

13. 说一下机器学习吧

14. 数据结构了解哪些

15. 树和图有啥区别
能否成环，树有个根节点

16. 什么地方会用到树

[广联达远程面试](https://www.nowcoder.com/discuss/267138)  

1. 自我介绍，重点介绍下项目

2. 详细讲解项目是怎么实现的？（口才不好，描述半天……）

3. 了解哪些常用数据结构？（数组、栈、树....）

4. 那说一下B+树的原理，有什么优势？
单一节点存储更多元素，减少IO
所有查询都要找到叶子节点，查询稳定
所有叶子节点形成有序链表，方便范围查询

5. 介绍一下索引
索引是对数据库表中一个或多个列（例如，employee 表的姓名 (name) 列）的值进行排序的结构。  

6. mysql为什么用B+树索引，不用其他索引？（忘了，只说了下hash索引的一个缺点）
B+-树特点是每层节点多，层数少，这样可以减少磁盘io次数，B+相比较B-因为数据都在叶子节点所以可以用链表将数据串起来，进行区间访问  
AVL 数和红黑树基本都是存储在内存中才会使用的数据结构

7. 情景题：实现一个栈，具有max方法，并且所有时间复杂度为O(1)
8. 说一个常见的排序算法，除了冒泡排序（说了归并排序）
9.  那写一下归并排序的实现
10. 谈谈jvm（数据运行区、GC，这个了解比较多，扯得有点多，后来被打断了...）
11. 反问环节

[广联达C++实习](https://www.nowcoder.com/discuss/427484)  
十分钟介绍项目  
unity UI/游戏机制/shader/winapi+d3d/前端经历  

除了C++还用过什么语言  

指针与引用的区别  
指针分配空间，引用只是别名  
指针可以为空，引用不可以  

面向对象的几个特点  
封装，继承，多态  

[c++几种类型转化](https://www.cnblogs.com/evenleee/p/10382335.html)  
const_cast：去const和volatile（所谓的易变性，在汇编层面反映出来，就是两条语句，下一条语句不会直接使用上一条语句对应的volatile变量的寄存器内容，而是重新从内存中读取）  
volatile关键字的作用：防止编译器优化，也就是上边的操作  
static_cast：无条件转换，静态类型转换，无运行时类型检查  
dynamic_cast：有条件转换，动态类型转换，运行时检查类型安全  
reinterpret_cast：仅重新解释类型，但没有进行二进制的转换

stl的几个模块  
vector,map,set,unordered_map,unordered_set

泛型编程了解么?  
函数模板、类模板  
STL就是很好的例子（pair等）

说下你了解的排序算法  

说下快排  

[红黑树和AVL数树区别?  ](https://blog.csdn.net/liang3720/article/details/81700748)
平衡二叉搜索树：红黑树只要大致的平衡，高度平衡树（avl）高度差最大为1；  
红黑树的复杂度O(logn)，是平衡二叉树，是二叉搜索树  
b树是平衡多路查找树，b+树只在叶子节点存数据，其他都是索引，应用是文件系统  

说下斐波那契数列  
最近在看什么书  

[广联达开发](https://www.nowcoder.com/discuss/230890)  
笔试：
1. 填空题 ，快速排序找到第k小的数，再递归
2. A，B 2个数组，交换其中一个元素使2个数组和相等

3. 回文数
先转到数组里，然后前后双指针遍历，比较。

4. 给定圆的半径，求圆内包含的小正方形的最大的面积？（这题求解答）

一面下午4点  
1. 讲一讲一面第二题的思路，
答：暴力法O（n*n）
给你几分钟 ，能不能优化一下
答：2数组元素之和 /2为期待结果，在A里面哪个换掉能得到期望值，而B中正好有该元素 则输出该元素
2. 讲一讲第三题的思路
3. 给一个数组，找出3个数的和为N
4. 求a^b, a很长很大，b为2-9；
面试管诱导我到正确的思路上，先算a b，a，b很大，再想a*a；最后想a^b；
5. 朱元璋有很多后代，在一次会上，2个朱氏后代富商，想知道他们最近的共同祖先是谁？每个朱氏后代只能向上寻找其父亲是谁。答：转换为相交双链表求交点的问题
6. 讲一讲项目，项目中遇到的困难，怎么解决的
二面下午6点
自我介绍
人生中做的最对的事情是什么？映像深刻的挫折
未来几年的职业规划
未来几年的生活计划
对广联达了解多少

[广联达人工智能](https://www.nowcoder.com/discuss/242943)  
[面经合集](https://www.nowcoder.com/discuss/322691)

[腾讯测开](https://www.nowcoder.com/discuss/431828)  
C++对象的大小是由哪些确定的  
成员变量的大小，内存对齐，是否有虚函数，是否有虚继承

C++虚函数和纯虚函数有什么不同  
纯虚函数没有实现，不可以实例化

C++的多态是怎么实现的  
虚函数

C++对象的内存布局
单继承、多继承、菱形继承（分是否虚继承）

计算机网络
tcp为什么要三次握手和四次挥手
数据库
redis是什么
redis是用来做什么用的
redis跟mysql有什么不同
编程题
用Rand6实现Rand10
判断链表是否有环，找出环的头部
经典赛马问题
二面 2020-05-26
编程题
后序遍历
[无递归后序遍历](https://leetcode-cn.com/problems/binary-tree-inorder-traversal/submissions/)
C++
宏定义结构体
memcpy可能会出的锅
C++如何实现多态
虚表是如何实现的  

[new/malloc](https://blog.csdn.net/qq_40840459/article/details/81268252)的内存分配在哪  
malloc从堆上分配内存，new从自由存储区（是更高级更抽象的概念，一般由堆组成，程序可以通过重载new指定其他内存实现自由存储区）分配内存？？  
“堆是操作系统维护的一块内存，而自由存储是C++中通过new与delete动态分配和释放对象的抽象概念。堆与自由存储区并不等价。”  

malloc的原理是通过系统调用实现的（在linux下是通过sbrk()系统调用实现）  

编译原理
函数调用的过程
数据库
mysql索引
b+tree
计算机网络
time_close是什么状态

[腾讯测开实习](https://www.nowcoder.com/discuss/388960)  
字母压缩  

最小公倍数 = m*n/gcd(m,n)  
最大公约数（gcd）: gcd(m,n) = gcd(n,m%n)

vivo提前批后端  
tcp四次挥手的time_wait等的是2msl（MSL是Maximum Segment Lifetime）  

几十g的文件，字符串的出现次数  

预防内存泄漏的方法，如何检测内存泄漏  

http的get post等方法的细节  

gdb调试工具  

unique_ptr怎么声明  

生产者消费者模型，怎么实际线程结构  

两个链表求交点  
方法一：哈希表存一个，遍历一个；方法二，快慢指针找相等  

unordered_map具体用的什么解决冲突的  
链地址法  


vivohr面：  

为什么想做这个职位  

你认为这个职位需要哪些能力  

对于求职公司看重哪些因素  

独生子，父母工作，女朋友  

工作城市  

对该公司了解多少  

提问

[游戏引擎面经](https://www.nowcoder.com/discuss/402956)  
C++：
1.new和malloc区别：new/delete会调用构造和析构函数，是C++的关键字；malloc和free是c的库函数  

2.STL中map的实现原理，怎么解决hash冲突  
map底层是红黑树，unordered_map是哈希表，解决冲突的方法是链地址法  

3.STL迭代器失效的情况  
* 由于插入元素，使得容器元素整体“迁移”导致存放原容器元素的空间不再有效，从而使得指向原空间的迭代器失效。
* 由于删除元素使得某些元素次序发生变化使得原本指向某元素的迭代器不再指向希望指向的元素。

4.右值引用的作用？std::move怎么实现的？  
延长右值的生存时间，避免不必要的拷贝；move底层就是一个static_cast类型转换  

5.三个智能指针说一下，weak_ptr如何判断是否失效？sizeof(shared_ptr)多少？  
Unique，share，weak  
weak_ptr是否失效三种方法：1.expired()方法返回true；2.use_count()返回0；3.weak_ptr转化为shared_ptr看是否有bad_weak_ptr exception  
64位机器是16，32位是8，也就是两个指针的大小，shared_ptr管理的普通指针所指向的对象必须为new出来的  

6.如何将C++类设置为不可继承  
简单的：将构造析构函数设为私有，然后提供静态方法构造和析构  
[最佳的](https://www.cnblogs.com/wxquare/p/7280025.html)：写个基类，构造析构私有，模板类型是友元；不可继承的类**虚继承**这个基类；其他类便不可继承该类  

7.能否将构造函数设为虚函数  
不可

8.继承下虚表的变化情况？  
数组一样的线性结构，按照基类的顺序，子类有就覆盖掉  

9.sizeof空结构体  
1

10.register变量可以取地址吗？  
可以

11.指针和引用的区别  
分配内存/只是别名；可以为空/必须初始化；可以任意改变/初始化后不能改变指向地址

12.深拷贝和浅拷贝  
复制出新空间/只是拿引用  

13.函数如何返回多个值（引用或者std::pair,std::tuple)  
14.C++  UB说几个  
未定义行为：除零，访问越界，访问空指针，未初始化

15.带有虚继承的子类内存分布  
先放自己的，再放基类的属性，最开始有vbptr，存着成员变量的偏移量，用来找到公共基类的成员变量  

16.C99变长数组是堆还是栈实现的？  
变长数组分配在栈中

操作系统&&计算机网络&&多线程:
1.线程和进程的区别
2.多发射了解吗  

3.C++中多线程库实现PV操作用什么？
4.TCP/IP三次握手，拥塞处理，滑动窗口
5.指令重排发生在编译阶段还是运行阶段？
6.智能指针是线程安全的吗？  

(这部分感觉问的比较少，也没啥印象了，也都是基础了)

Lua：
1.lua的__index和__newindex是什么？  
__index是table进行索引时如果没有值，就调用__index（可以是function可以是table，是table就在table里索引）；  
__newindex是给table不存在索引进行赋值时，调用__newindex（可以是function可以是table，如果是table就在这个table里赋值而不是原来外层的table）  

2.lua的垃圾回收机制？是否存在互相引用现象？  
语言级别的垃圾回收

3.lua的元表怎么重载运算符？  
用metatable

4.lua怎么实现面向对象的机制？  
table做object，元表实现继承

5.lua的table底层是怎么存储的？  
为了提高table的插入查找效率，在table的设计上，采用了array数组和hashtable(哈希表)两种数据的结合。

6.lua对栈的操作比较麻烦，有优化方法吗？  


7.lua和C++怎么绑定，有什么库？
8.lua的pairs和ipairs有什么区别?  
* pairs遍历表中全部key，value
* ipairs从下标为1开始遍历，然后下标累加1，如果某个下标元素不存在就终止遍历。这就导致如果下标不连续或者不是从1开始的表就会中断或者遍历不到元素。

图形学&&管线:  
1.渲染管线说一下，前向渲染&&延迟渲染  
应用阶段，几何阶段，光栅化阶段  
顶点数据，顶点着色器，曲面细分着色器，几何着色器，剪裁，屏幕映射，三角形设置，三角形遍历，片元着色器，逐片元操作，屏幕图像  
前向渲染：检测深度，如果可见就计算光照获取颜色信息，更新帧缓冲（在颜色缓冲中进行混合）  
延迟渲染（deferred shading）：检测深度，如果可见就将片元信息（法线，位置，材质信息）保存到G-Buffer，最后用g-buffer中的信息进行光照计算（g-buffer中混合）  

2.延迟渲染的缺点，分块延迟渲染知道吗？[为什么延迟渲染带宽会那么大](https://www.sohu.com/a/125709754_468740)?  
延迟渲染主要的好处包括：  
    1） 光照的开销与场景复杂度无关。  
    2） Shader可以访问深度和其他像素信息。  
    3） 每个象素对每个光源仅运行一次。也就是说，那些被遮挡的像素是不会被光照计算到的。  
    4） 材质和光照的Shader完全分开。  
延迟渲染还需要克服的主要障碍包括：  
    1） 较高的显存带宽占用，因为gbuffer大  
    2） G-buffer消耗较多的填充率，这个问题在游戏机上比较严重（像素填充率是指图形处理单元在每秒内所渲染的像素数量）  
    3） 无硬件反锯齿的支持  
    4） 对Alpha Blend支持较差  

[TBDR分块延迟渲染](https://gameinstitute.qq.com/community/detail/123220)：带宽直接影响能耗，tile based rendering可以使用on-chip的memory，从而频繁访问从frame buffer到processor转移到了on-chip memory到processor  

带宽占用高：因为G-Buffer的大小

3.SSAO原理，除了SSAO还有哪些AO？  
SSAO：屏幕环境光遮蔽，SSAO通过采样象素周围的信息，并进行简单的深度值对比来计算物体身上环境光照无法到达的范围，从而可以近似地表现出物体身上在环境光照下产生的轮廓阴影。  

[其他AO](https://www.zhihu.com/topic/20712088/intro)  

4.阴影贴图原理 PCF是什么 PCF的卷积核有什么？ CSM？  
[阴影贴图](http://blog.sina.com.cn/s/blog_6ba3e8e50101eh8x.html)：光源位置，视点位置，还有物体高度可以计算出阴影的区域（阴影贴图）  

PCF：软阴影算法，传统PCF的主要原理就是通过对周围像素取值进行高斯模糊，算定阴影像素点的权值，进行加权计算。  

[CSM](https://blog.csdn.net/kuangfengwu/article/details/7946036?_t=t)：fft重新构建shadow map  

卷积核有什么：

5.PBR说一下，几何函数的意义,IBL主要是针对高光还是漫反射光？  
几何函数：描述微平面自阴影和自遮挡的属性  
IBL（image based lighting）
{% asset_img 几何函数.png %}

6.Lod是什么？除了通过摄像机和物体距离判断Lod等级，还有什么方法？  
level of detail；

7.DrawCall的开销体现哪里，就是你调用DrawCall,具体干了什么？  
准备工作（最费时）->cpu发起drawcall->进入command buffer->GPU  
准备工作：硬盘收集网格信息（顶点位置，法线，顶点颜色）和纹理信息，加载到内存，然后加载到显存；然后设置渲染状态（是否透明，lightmode，单双面）  
小drawcall合并到大drawcall中，不能让cpu准备工作太久，导致gpu空闲

8.Bloom效果怎么实现？  
提取较亮的区域，保存到一张渲染纹理中，利用高斯模糊进行处理，模拟光扩散，最后与原图混合  

9.描边算法说一下？怎么不用后处理的卷积算子做描边？卡通化渲染呢？  
* 视角方向和表面法线方向，一个pass出结果，效果不好
* 两个pass，一个渲染背面面片，一个正常正面面片，快速有效，不适用立方体这样平整模型
* 基于图像处理的轮廓线渲染（卷积等边缘检测方法）
* 混合上述方法

卡通化：1.渲染轮廓线；2.添加高光  
素描风格：TAM（tonal art map）的例子，用到了mipmap，不是简单的降采样，而是控制笔触间隔，模拟素描效果  

使用一个噪声纹理得到的法线贴图可以实现一个包含菲涅尔反射的水面效果  

边缘检测算子：roberts，prewitt，sobel

10.DX12大概是怎么减少开销的，说一下  


11.[mipmap说一下](https://www.zhihu.com/question/66993945)？它对带宽有什么影响？  
多占用33%的内存，减少带宽使用，实际是增加缓存命中率，相当于离线计算好1个pixel覆盖多个texel的结果  

12.压缩纹理有什么格式？  
DXT RGBA32/16

13.Unity外部调试工具有哪些？  
内部profiler，framedebugger  
安卓的有高通的adreon、英伟达的NVPerfHUD；IOS平台PowerVR有一个，XCode有一个  

14.UE4渲染过程大概说一下，随便说几个Pass？  


15.[为什么延迟渲染不能开MSAA](https://www.zhihu.com/question/366668747)？  
[MSAA](https://blog.csdn.net/limanru14/article/details/104305514)：把每个pixel(或者说fragment)细分为多个sub-pixel，比如分为4个、8个、16个甚至32个sub-pixel  
延迟渲染不能开不是技术上不行，是采用msaa每张图x4 （四张图采样）负载过大

16.有什么方法能降低一个场景中的渲染开销吗？说的越多越好  
mipmap：多级纹理，典型空间换时间，应该是可以缓解带宽的因为用了压缩后的贴图；  
合并drawcall：drawcall主要的性能瓶颈在cpu准备阶段（收集信息，设置渲染状态）；  
early-z：将深度测试提前

17.纹理数组知道吗？  

18.实例化是怎么做的？说一下流程和好处  

19.说一下常见的[遮挡剔除算法](https://www.jianshu.com/p/0a7a018c5539)？  
* hidden line removal
  * raycasting
  * 画家算法（从后往前画）
  * warnock算法：递归细分
  * bsp tree二维空间分割树
  * z-buffer
* culling
  * portal
  * 视锥体剔除：如果某物体全部顶点都在视锥外面，则不显示
  * 背面剔除：通过每个面的法线来判断是正面还是背面

20.纹理在移动设备上存储在哪里？
21.全局光照能说一下吗？SH也说一下?  
[球谐光照](https://blog.csdn.net/leonwei/article/details/78269765)的优点是运行时的计算量与光源的数量无关，如果参数足够却可以较好的模拟实时的光照结果。球面函数的也有例如傅里叶展开一样的东西，叫做勒让德多项式（Legendre Polynomials），

22.如果把近处平面去掉了会怎么样  
视锥体剔除嘛，进平面去掉物体就可以贴到镜头前，近平面远就会提前看到剔除

23.OpenGL的VAO和VBO
24.GBuffer一般里面有什么，GBuffer要不要存储position信息，如果不存储，怎么用深度信息进行推导
25.卷积知道吗？说一下，模糊呢，为什么需要模糊？  
卷积核遍历图像像素进行计算得到新图像，根据卷积核不同作用不同，例如可以实现提取轮廓线的工作，我的理解是做特征提取。模糊可以实现bloom这种效果，具体来说选高光部分组成一张纹理，使用模糊处理后在于原图合并  

26.次表面反射知道吗？  
sss就是指光从表面进入物体经过内部散射，然后又通过物体表面的其他顶点出射的光线传递过程。  

27.透明度测试和深度测试的关系？  
透明度测试是透明度小于一个阈值就不显示，深度测试用来显示半透物体

28.法线贴图说一下，切线空间呢？  
法线纹理和高度纹理都属于bump map

29.移动设备怎么减少DrawCall Overload?  
early-z，不透明物体从前往后画

30.各向异性在光照模型中如何实现？  
各向异性 (anisotropy ) 与 均向性 相反，是指在不同方向具有不同行为的性质，也就是其行为与方向有关。应用场景例如头发，晶体，这类材质不均匀，原子排列周期疏密不相同的物质  
Bank BRDF 属于经验模型，由于其计算简单，且效果良好，所以该模型在各向异性光照效果的模拟方面非常有用  

各向异性滤波？：比如一个走廊，视点消失处的像素采样会变模糊，各向异性滤波可以使其便清楚  

31.opengl中顶点数据被送入顶点缓冲区时api做了什么？
32.phong和billn-phong区别是什么？  
blinn不需要计算反射角度，取而代之的是视角与入射角度的均值  

33.ray marching 知道吗？
34.opengl和dx有什么数学上的差别？  
坐标系零点

35.Alpha Blend和Alpha Test在性能上有什么不同？  
透明度测试没通过的就不渲染了，透明度混合的话需要都渲染然后进行叠加

36.光源剔除怎么做？  
？？

37.遮挡剔除怎么做？知道Mesh Shader吗？  
unity有个occlusion culling window可以对static的物体烘焙，不进行渲染；  
nVidia推出的mesh shader

38.CS知道吗？为什么有些pass放到cs而不是ps做？

游戏数学&&算法：
1.点沿任意轴旋转的矩阵怎么推导
2.怎么判断一个物体是不是在你面前还是身后？
3.[A*算法](https://blog.codingnow.com/2006/07/astar.html)说一下，它的最大缺点是什么？  
该点到起点的距离，该点到终点的距离
仅仅是一个启发式搜索算法，最大的缺点就是，空间需求太大

4.八叉树算法说一下，它用在哪里居多，物体运动了咋办？  
常用于离散化空间，数据划分存储，数据查找等。  
八叉树四叉树一样的，要是找相交图元的话，比如说范围攻击，可以从根节点开始遍历，如果相交在跟子节点检测，直至叶子节点，这样可以省掉一部分比较次数  

5.kd-tree和bsp说一下  
k维树（每个节点为k维的二叉树，超平面把空间分成两部分），是特殊的二叉空间分割树

6.推导View矩阵
7.[如何判断射线和三角形相交](https://www.cnblogs.com/graphics/archive/2010/08/09/1795348.html)
8.[如何判断两个立方体是否相交(AABB包围盒相交问题)](https://blog.csdn.net/u012419410/article/details/41911025)
9.如何判断点是在多边形里面还是外面？
10.如何判断三角形和三角形相交?
11.说一下点积和乘积的几何意义？  
b在a上的投影；叉乘模是四边形面积，方向是垂直ab平面
12.矩阵左乘和右乘区别？  
矩阵左乘变换矩阵是进行行变换；右乘是列变换

游戏开发：
1.帧同步中的帧是什么意思？  
操作，动作

2.常见的设计模式说一下
3.Unity的awake,enable,start
4.UE4的垃圾回收怎么实现？不会？那说说反射吧
5.UE4蓝图和C++代码通信的几个方法？
6.ECS框架有什么好处？


[链接](https://www.nowcoder.com/discuss/438775?type=post&order=time&pos=&page=1&channel=666&source_id=search_post)
1 腾讯-游戏客户端开发  
一面  
C++基础：  
stl的vector和list的区别，增删分别的时间复杂度  
vector底层数组，连续空间；list底层链表，离散空间；list善于增删O(1)，vector O(n)  

虚函数机制  
有虚函数的类会存在一个虚函数表，虚函数表的实际位置在静态存储区，每个实例化对象的最前边会有个虚表指针指向这个表，用父类指针指向一个子类实例来实现动态多态  

C11的新特性  
auto；三个智能指针；右值引用（延长右值寿命，移动语义一般是用在移动构造函数比如改进版的swap函数，避免使用拷贝构造函数；注意右值引用也是引用，函数不能返回局部变量的右值引用）

计算机网络：  
解释TCP3次握手  

图形学：
速度过快/体积过小导致物理引擎检测不到碰撞，如何解决  
自己来检测的话：记录前一帧的位置，从前一帧的位置向当前帧的位置发一条射线，用过射线是否碰撞来判断是否碰撞  
完全依赖引擎的话：Unity的rigidbody有[collision detection](https://blog.csdn.net/cangod/article/details/100524270)选项
* discrete：default
* continuous：防穿静态碰撞体 TOI（time of impact）算法，线性扫描所以无法检测旋转物体
* continuous dynamic：防穿静态和同为c的刚体
* continuous speculative：推测式（投机式）ccd，膨胀AABB碰撞盒，可能出现幽灵碰撞

开放性问题：  
如何优化内存，实际开发过程中用过什么优化内存的方法  
mipmap关闭；模型/图片的write/read；内存池；

如果有对象要频繁创建和删除，用什么减少开销。(对象池)  
对象池的大小通常如何决定：太大占内存，太小没作用，结合数据分析来确定  


二面
二面面试官给我发了一个腾讯文档，考8道C++基础题，涉及到C++自定义类的大小如何决定(默认大对齐)、右值引用、模板类、STL的iterator使用等等，在面试官纠正下我勉勉强强做出了7道，感觉还是蛮难的。题就不公开放了，有小伙伴需要的话私信我单独发吧。

三面
三面给我印象不是很深，好像是问了问我简历里的项目，然后我叽里咕噜跟面试官说了一堆，说了啥我已经忘了，毕竟面试里说的那些高大上的话太羞耻了根本不敢回忆😂

2 网易-游戏引擎研发
手撕代码：是否是合法括号串
手撕代码：最长合法括号串，上面一题的升级版，要求O(n)
这是网易一面的两道题，做完之后开始问问题，被面试官怼飞了。能感觉得出来网易那会已经不招人了，就纯粹面你面着玩，岗位相关的问题就没问几道，逮着我简历里不相关的经历狂怼，最后话都没让我说完就让我回去等消息了。

3 字节-游戏引擎研发
一面

C++基础：
几个stl容器的底层实现  

[右值引用和move构造](https://www.zhihu.com/question/57048704/answer/151446405)  

const、static关键字

C++里的[lambda函数](https://www.cnblogs.com/pzhfei/archive/2013/01/14/lambda_expression.html)  
```[capture](parameters)->return-type{body}```

指针和引用的区别

软件工程：
介绍几个设计模式
C++里的面向对象

图形学：
介绍渲染管线
解释纹理采样的两个模式  
repeat，clamp

手撕代码：前序遍历

二面
C++基础：
解释C++的多态如何实现  

解释类模板和模板类的区别  
类模板经实例化后生成了3个类型分别为a,b,c的模板类

右值引用、move语义

图形学：
介绍顶点处理中涉及到的矩阵变换  
旋转缩放，平移

介绍一个光照渲染模型(我介绍的是冯氏光照)
介绍一个消除隐藏面的算法(我介绍的是Z缓存)
如何解决因为顶点过近和浮点数的精度不足带来的穿模问题  


手撕代码：快排

三面
开放性问题：
在特定场景如何选择stl容器，以什么为标准？你最近一个应用到这个容器的场景是什么？
在N*N棋盘地图上放一个圆形技能，检测影响到的玩家对象，用什么数据结构实现？
不关心顺序的数组如何实现O(1)的删除操作 


**字节游戏引擎1/2面（2020.7提前批）**  
Asset Bundle是怎么在jit（虚拟机？）中加载prefab的：Unity的跨平台技术是通过一个Mono虚拟机实现的。而这个虚拟机更新太慢，不能很好地适应众多的平台。unity公司就自行研发了IL2cpp，把本来应该再mono的虚拟机上跑的中间代码转换成cpp代码，这样再把生成的cpp代码，利用c++的跨平台特性，在各个平台上通过对各平台都有良好优化的native c++编译器编译，以获得更高的效率和更好的兼容性。

Unity项目中的[Library文件夹](https://blog.csdn.net/u012138730/article/details/81143413#2.Library%E6%96%87%E4%BB%B6%E5%A4%B9)：此放的是程序集和库的缓存文件。 

Unity的Inspector面板中查看GO属性是怎么实现的：反射，运行时获取属性并进行修改  

接着inspector，undo和redo怎么实现：记录一个操作队列，怎么设计这个队列  
我这边说了unity的scene文件在版本控制工具中看就是文本记录的属性，可以记录下修改的值，比如加或减一个数，撤销就是减或加回来  
正解应该是[命令模式](https://www.jianshu.com/p/7747f574d53b)

各向异性过滤算法：是用来过滤、处理当视角变化导致3D物体表面倾斜时造成的纹理错误；传统的双线性和三线性过滤技术都是指“Isotropy”（各向同性）的，其各方向上矢量值是一致的，就像正方形和正方体  

图形学中渲染阴影的方法：我说了shadowmap，追问能想象到哪些地方会比较糙吗，有限的分辨率下看起来品质尽可能高，bloom和blur搞混了，bloom是泛光的效果，blur是模糊效果；抗锯齿是通用的方法，跟这个问题没有关系；他的意思是远的地方，或者说斜射的地方会一个光照贴图的像素对应一大片场景区域，怎么处理；  

[Cascaded shadow map](https://zhuanlan.zhihu.com/p/116731971)：级联阴影贴图，将平截头体分成若干份，由近到远使用分辨率有高到低的shadow map  

pbr理论，cook torrance光照模型的微表面理论：用来模拟不同材质的镜面反射效果；三部份组成——菲涅尔反射，微平面法线分布函数，几何项  
phong光照的问题在于他不是能量守恒的  
经验模型：Lambert、phong、blinn-phong

抗锯齿，四倍或几倍细分的话显卡受得了吗：我说的是延迟渲染不能用aa就是不是因为技术上不行，就是因为显存遭不住  

体渲染：雾，水体

对于移动的物体如何计算光照：光照探针？球谐函数模拟全局光照  

**3面负责人面**  
shared_ptr实现：  
引用计数增加的情况:  
拷贝一个shared_ptr，其所指对象的引用计数会递增，如：
1. 用一个shared_ptr初始化另一个shared_ptr
2. 用一个shared_ptr给另一个shared_ptr赋值
3. 将shared_ptr作为参数传递给一个函数
4. shared_ptr作为函数的返回值
 
引用计数减少的情况:
1. 给shared_ptr赋予一个新值
2. shared_ptr被销毁（如离开作用域）

什么情况用vector什么情况用list；使用list的应用场景，怎么找到删除节点的位置（靠遍历吗？需要O(N)时间，），实现erase方法；boost中的signal或者C#中的delegate/event怎么实现的  

**上海无双一面引擎**
[为什么图形学中要用4*4的矩阵](https://www.zhihu.com/question/36296104/answer/1398427077)




**字节TA**  


1. 自我介绍

2. 渲染管线的流程

3. 用glsl语言写过完整的shader吗

4. 三维向量位移、旋转、放缩的矩阵、三个的排序
   缩放，旋转，位移

5. [异面向量距离计算](https://baike.baidu.com/item/%E5%BC%82%E9%9D%A2%E7%9B%B4%E7%BA%BF%E7%9A%84%E8%B7%9D%E7%A6%BB/2074683?fr=aladdin)
   求ab公共法向量，也就是公垂线的方向向量n，ab上任取AB点，求AB线段在向量n上的射影d

6. 万向节死锁的解决方式、具体说一下原理
   用xyz欧拉角表示才会万向节死锁，用四元数就不会了

7. 高斯模糊的shader代码

8. 卡通效果的shader代码

9.  半兰伯特光照、phong高光、blin-phong高光shader代码

10. Alphablend为什么不能depth write、为什么要depth test
    但对于半透明的 fragment，每一个都会影响最终的结果，需要从远至近地渲染。由于深度缓冲不能用于排序多个 fragment，所以只能用于保存最接近视点的不透明 fragment 深度，远于该深度的透明 fragment 不用渲染，所以仍需要深度测试（depth test）。

11. Renderqueue的作用
    background 1000，geometry 2000，alphatest 2450，transparent 3000，overlay 4000

12.  透明模型前后面冲突的解决方法
    分两个pass，第一个开启深度写入，不输出颜色；第二个正常的透明度混合

13.  模型放大的方法，方法越多越好

14. Z冲突的解决方法，方法越多越好
    搜索z-fighting  
    第一点：当然，从这里公式里面，我们也能看到，想要让深度值更加精确，那么适当的见效近平面与远平面的绝对距离，也是可以做到的。当然在不影响渲染质量的前提下。

    第二点：根据物体距离视点的距离，在渲染的时候，进行一个计算，避免距离视点比较远的物体相距太近。

    第三点：可以使用OpenGL ES内部提供的API，多边形偏移，但是会造成性能的浪费，可结合CPU空间划分与LOD算法使用。

    第四点：提高深度缓冲区的精度，这样，其在深度缓冲区测试的时候会更加的准确。

15.  锯齿的原因 抗锯齿的方法
    纹理分辨率低于屏幕分辨率，aa的方法4x8x
    msaa经典，英伟达txaa

16. Pbr材质需要什么要素、有没有做过

17.  有没有用lua写过脚本，写过什么脚本

18.  抖音视频;如果让用户写的字显示在屏幕上，说几个有意思的创意，越多越好。

19.  抖音视频：如果能对用户的图片进行断裂处理，说几个有意思的创意，越多越好


**美团测开**

测试用例设计：  

如何完备测试用例覆盖：
* 所有需求都已设计用例
* 所有类型已覆盖，如功能测试，性能测试
* 所有平台、不同层次都有设计用例，如业务层、接口层

postman接口测试工具：  

http指令[get和post的区别](https://www.w3school.com.cn/tags/html_ref_httpmethods.asp)  
PUT请求：如果两个请求相同，后一个请求会把第一个请求覆盖掉。（所以PUT用来改资源）  
Post请求：后一个请求不会把第一个请求覆盖掉。（所以Post用来增资源）


### 游戏客户端8.16开始

[网易雷火](https://www.nowcoder.com/discuss/476842)：  
大小端首字节

[矩阵求逆的方法](https://jingyan.baidu.com/article/1709ad8095e1924634c4f03a.html)：待定系数法解方程组；矩阵和单位阵合并初等变换；代数余子式  

memcmp比较结构体：由于memset可能取消字节对齐，memcmp是逐字节的比较的，所以比较结构体结果可能出错，建议重写结构体或者类的operator=  

**[完美世界引擎](https://www.nowcoder.com/discuss/477076)**

多继承的实现，可能导致命名重复，需要在前边加上A::n; B::n这样的作用域  

[堆栈](https://www.zhihu.com/question/281940376/answer/424990646)，可以理解为自由存储和自动变量。自动变量会在作用域结束后析构、释放内存；自由存储可以在函数结束后继续生存  

函数执行的过程：
* 函数调用：把下一句代码压栈；
* 函数体执行：如果有局部变量压栈
* 返回：出栈，执行下一个语句

进程间的状态转换：运行态、就绪态、阻塞（等待）态、新建态、退出态  

[进程调度算法](https://blog.csdn.net/wx960421/article/details/88697996)：
1. 先来先去服务
2. 时间片轮转法
3. 多级反馈队列算法
4. 最短进程优先
5. 最短剩余时间优先
6. 最高响应比优先
7. 多级反馈队列调度算法

**[字节客户端](https://www.nowcoder.com/discuss/501477)**  

c++ 类型转换介绍下  
static_cast dynamic_cast reinterpret_cast const_cast  

介绍stl的vector,list,unordered_map,map  


unordered_map的哈希冲突怎么解决的？  
链地址法

前序遍历/中序遍历/后序遍历的递归和栈的实现方式  


介绍下三次握手和四次挥手  


介绍下滑动窗口  
是一种算法可以解决字符串匹配等问题，循环两边变为循环一遍；tcp流量控制也有使用到滑动窗口  

介绍下渲染流程
介绍下旋转变换  


一个二叉树的左视图

二面：
结构体和类的区别，为什么保留这两个？  
深度探索C++对象模型里有p15，注意宏，inline函数，普通函数的区别

介绍下实习
[给c++添加个GC机制](https://www.cnblogs.com/baiyanhuang/archive/2012/10/26/2741522.html)  
mark,sweep,compact  
* 寻找以下三种用户自定义类型的对象：全局的；静态的；当前栈上的，把这些对象作为根，然后递归寻找他们所引用的内存（成员）， 并在hashmap中把这些内存地址为key的项的值设为true，表示不应回收。(Mark)
* 遍历hashmap，把value为false的项全部delete，并从hashmap中删除 (Sweep)
* 把hashmap中存在的内存对象，全部移动到一块集中的区域，以减少内存碎片，同时注意修改这些对象被引用的地方，因为地址改变了。(Compact)
RAII，也称为“资源获取就是初始化”，是c++等编程语言常用的管理资源、避免内存泄露的方法。它保证在任何情况下，使用对象时先构造对象，最后析构对象。

[udp如何保证可靠性](https://blog.csdn.net/gettogetto/article/details/76736365)？然后深入问了下设计，问了挺久的10几分钟吧  
tcp/udp位于传输层，传输层不可靠只能在应用层实现可靠的机制，具体来说就是确认机制、重传机制、窗口确认机制  

[进程和线程的区别](https://www.cnblogs.com/baoendemao/p/3804677.html)，共享/不共享什么？线程间通讯?  
信号量，锁

生产者消费者模型的好处  
缓冲、解耦、支持并发

同步和异步
设计一个定时器  


概率题:
1-100个队伍，现在要两两配对成为50只队伍，如何保证公平？

算法:
一个数组，奇数一边，偶数一边，保证奇数和偶 数之间的相对位置不变

三面：
自我介绍
实习介绍

概率题:
随机在圆内生成N个点，请问N个点全在 同一个半圆的概率
冰火雷三种属性，有三个槽，属性可以重复使用，槽不能为空，顺序不关和顺序有关几有种方案

设计题:
实现线程安全的智能指针
现在有个系统，查询频率很高，但是数据量太大了，设计一个分布式的系统
客户端和服务端有什么区别？

图形学:
如何把三角形渲染到屏幕上  
设置点坐标，index的顺序，设置渲染类型（前向、延迟），发起drawcall，进入渲染管线。

mvp矩阵：投影矩阵的结果是ndc空间的立方体


**[快手游戏客户端实习](https://www.nowcoder.com/discuss/409403)**

1.本人以前学校期间实现过LOL，问了我同步方式，以及英雄移动、技能、伤害等处理方式。还有寻路系统，包括unity中的自动寻路和A*寻路。

2.射击游戏中的子弹发射方式。
（1）射线：CF使用
（2）实体子弹，需要使用对象池：吃鸡使用

3.算法题：在一段无序数组中选出乘积最大的三个数，数组中有正有负。
回答：先排序，然后选负数中的最小两个和正数中的最大三个。三个数必然是这五个数中的三个

4.对虚函数理解（要求摸清原理）

5.加入让你做一个数独游戏，你会怎么设计。说说你的思路和用到的数据结构。

6.排序算法
当时面试官问了我你知道那些排序算法

二面

1.问LOL的实现细节

2.问“快手小游戏”中的“步步高升”的具体实现思路。

3.数学题：斗地主中地主拿到王炸的概率
（52*51*......*35）/（54*53*52*.....*37）  
$$C_{52}^{18} / C_{54}^{20}$$

4.计算机图形学：以前没有系统学过，所以说正在学。问了OpenGl正方形的绘制

5.给你一个根目录，遍历所有目录并打印
本人回答深度优先遍历和广度优先遍历

6.KMP算法

**字节后端五轮**

rand7生成rand10  
[拒绝采样](https://zhuanlan.zhihu.com/p/103394563)：生成两次7，一共49个数，拒绝9个，剩下的对10取余  

定时器实现：双向链表；堆；时间轮；层级时间轮  

**ohayoo**
渲染管线  
early-z  
overdraw  
几种光照模型  
兰伯特模型公式，理解  
pbr可以手绘吗  
pbr常用贴图有哪几种  
ao贴图，怎么得到一个ao贴图，写一个生成ao贴图的算法  
shadowmap怎样实现  
alpha测试，什么时候用  





### 银行面试

其他索引与主键索引关系：唯一索引，主键索引，聚集索引，联合索引；主键索引是特殊的唯一索引  

主键索引的数据结构：b+树，b-树  

写sql时用什么函数查看我会涉及多少行：聚合函数count(); select count(A), A from C where B<>0  

[C++异常处理机制的原理和应用](https://www.cnblogs.com/alvin2010/p/9121535.html)：try catch throw处理异常，C++提供了一系列标准的异常，例如outofrange，badalloc，badcast  
也可以自己定义exception  

mysql索引为什么用B+树不用B树：磁盘读写代价更低，查询效率更加稳定，更便于遍历，更适合基于范围的查询  
1. B+树的数据都集中在叶子节点。分支节点只负责索引。B树的分支节点也有数据。B+树的层高会小于B树，平均的Io次数会远小于B树
2. B+树更擅长范围查询。存储在叶子节点中的数据是按顺序放置的双向链表。而B树范围查询只能中序遍历。
3. 索引节点没有数据。比较小。b树可以把索引完全加载至内存中。

什么情况下产生死锁、解决死锁的方法：  
（1） 互斥条件：一个资源每次只能被一个进程使用。
（2） 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。
（3） 不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。
（4） 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。

1、撤消陷于死锁的全部进程；
2、逐个撤消陷于死锁的进程，直到死锁不存在；
3、从陷于死锁的进程中逐个强迫放弃所占用的资源，直至死锁消失。
4、从另外一些进程那里强行剥夺足够数量的资源分配给死锁进程，以解除死锁状态

kafka是哪层的协议，ftp是哪层的协议：kafka自行设计的基于TCP层的协议；应用层协议

网络分层：7 应用层 6 表示层 5 会话层 4 传输层 3 网络层 2 数据链路层 1 物理层

算法稳定性：前后顺序不变

分布式CAP三原则：

时间复杂度与空间复杂度的概念/快排的时间复杂度/插入排序的空间复杂度：nlogn，常数空间  

什么是微服务

开发的分布式通信平台是否有性能的问题，是怎么调优的

读写分离时，读和写的数据是怎么同步的

C++中分配内存和释放内存是什么含义  
静态存储区分配全局变量，堆栈，

C字符串比较、字符串拷贝  
strcmp，strcpy

聚簇索引与非聚簇索引：数据行的物理顺序与列值（一般是主键的那一列）的逻辑顺序相同，反之为非  

为什么需要timewait  


虚拟内存分布  

自旋锁  

多线程什么场景，在IO密集型和cpu密集型都会出现什么问题  

两个线程顺序打印26个字母(通知机制),那三个线程，四个线程怎么处理  

根据简历，hadoop spark flink区别  

根据简历，为什么使用oracle数据库，为什么不用hbase或者mysql这些  

根据简历，你的流量获取是实时的还是离线处理的  

根据简历，kafka几个topic，有没有出现消费者消费不过来  

根据简历。为什么使用hdfs  

线程池用过没，需要注意哪些事项  

说一下操作系统分页  

线程绑核了解不  

**交行**：
面试官1：
指针和引用
多态
多继承的优缺点
进程间通信方式
内存分配
Linux 下makefile怎么写
面试官2：
说一下 socket 初始化方式
地址栏输入百度之后，发生了什么，用到了那些协议

**hr：**

对农行的理解：农行是我国四大国有银行之一，为农业的发展提供了有力的支持，农行的优势在于金融服务全面，全国网点最多，遍布城乡；相比较其他三家来说信息化程度较低，金融科技和人工智能的利用率略低，可以说这方面是有很大的需求以及发展前景的。  
[核心理念](https://zhidao.baidu.com/question/138763351.html)  
农村农业农民  

与互联网企业的区别：互联网企业的产品比较多样话，银行的产品较为专一；互联网企业的开发模式一般来说都是敏捷开发，快速迭代，而银行项目则更为严谨，对事故容忍度更低，所以需要更多项目管理，软件工程管理相关的知识。具体到互联网金融与传统金融来说，受众不同，互联网金融的目标受众是个人，而银行服务于企业，大客户。

为什么选择银行：
1. 农行这个平台可以提供很多学习的机会（不光是技术层面，还有管理、工作习惯、为人处世等方方面面），同时机遇与挑战并存，我希望未来的工作是有一定挑战性的；
2. 国有企业是相对稳定的，本身研发人员就需要不断学习新技术，我希望自己的工作环境可以相对稳定；
3. 我从网上，师哥师姐口中了解到的情况，对农行的评价很高，客观上农行确实



### 自我介绍

银行：各位面试官下午好，我是***，本科与硕士均就读于北京工业大学。专业技能方面编程语言我熟悉C/C++，C#项目中使用的比较多，了解lua。非常熟悉Unity游戏引擎，因为学校项目都是基于Unity开发的，包括中石油以及贵州电网的项目。其中中石油的项目我是作为学生这边的负责人，贵州电网的项目也负责了几个重要功能模块的开发工作。对计算机图形学，渲染管线，性能优化方面有一定的了解。值得一提的是，我在大二以534分的成绩通过了英语六级考试，并且本科期间任学校轮滑社社长，组织、参与了大大小小不少活动。也参加了校阳光团的一些志愿者活动。  
硕士期间我的研究方向是做单目相机的三维人体重建工作，目前这个课题我已经以第一作者发表了一篇CCF推荐的会议论文，会议名称为ICIP。这篇论文可以说是我们实验室内同期最早的一篇论文了，导师也比较肯定。研究生阶段我有一个二等奖学金。
实习经历方面，我有两家行业内比较有影响力的互联网公司以及工商银行的实习经历。

银行：各位面试官上午好，我是***，本科与硕士均就读于北京工业大学，我这边就简单介绍一下我的技术栈：编程语言方面我熟悉C/C++；其次是C#，因为学校项目以及我的本科毕设都是基于Unity游戏引擎，而Unity使用C#作为脚本语言；了解lua，因为在搜狐畅游实习时用到了。我十分熟悉Unity游戏引擎，这方面的开发经验比较丰富；同是对计算机图形学、渲染管线以及基础的渲染性能优化有一定的了解。了解DCC软件，具体来说有max，sp，sd；

实践经历方面，硕士阶段的研究方向是做单目相机的三维人体重建工作，目前这个课题已经发了一篇ccf推荐的会议论文；我有两家互联网公司，以及工商银行的实习经历；学校项目主要是中石油以及贵州电网这两个，我个人最喜欢或者说进步最大的项目是我的本科毕业设计。
我的业余兴趣爱好也比较广泛，这就是我的基本情况。

1. 游戏研发：本科有Unity课程，对建模（PBR模型制作）到游戏引擎，甚至是剧本策划都有一定的了解。
个人之前的实习经历都是偏前端，有尝试mirror（unet），skynet，这些服务器框架，还在逐步学习。
对游戏引擎，准确说是渲染引擎比较感兴趣，本科课程中完成了简单的webgl渲染引擎，现在在学DX12 win32API的渲染引擎开发。
因为实验室课题缘故，掌握了一些深度学习相关的技能，linux系统用过，conda，pytorch，AI+GAME是很好的方向。

1. 后端研发：本科读的数字媒体技术，偏重于技术，同时也学习了ps，音视频剪辑，建模等一些课程。除了语言，还有oop这种基础课程，我大二下开始学习使用unity为主以C#作为脚本语言，游戏研发课程。游戏引擎开发，是做webgl的网页渲染引擎，白鹭实习。学习node react electron技术栈，做的工作还是比较简单的，然后选择读研，就是想多三年学点自己想学的东西。三维人体重建。跟本科时学的东西有关联。在做课题的同时也在回过头来看基础知识，查缺补漏，围绕着C/C++，更接近底层。这么做呢一方面是找工作需要，一方面也是为职业生涯考虑，我是希望可以做全栈工程师。
计网还有linux环境上的C++开发，没有经验是我的劣势，但是我认为我的学习能力还是可以的，不是说有多快，就是愿意深入了解它，学习的更透彻。

1. 图形研发/引擎：遇到的困难
1 能用别人的轮子就别自己造； 2 确实是具体问题，但是可以找到解决问题的模板，主要是一些设计模式上的困难，比如如何在更好的使用组合而非继承，观察者模式（比如说一个怪物死掉了，一方面要给任务系统完成任务，一方面人物要加经验，一方面怪物自身的ragdoll要开始生效，C#中的委托） 3 也就是网上找不到答案，比如说写论文做实验用的开源项目，提issue，捋逻辑。  
最近再跟着utube上的教程做d3d+winapi的渲染引擎

传统软件公司和互联网公司在企业文化，工作内容，工作状态上的差别，需要实际体会；实习是为了投资自己，学习知识；图形开发这个岗位，个人感兴趣，综合之前的学习经历，对画面渲染、几何结构、动画

### 提问环节

团队规模？游戏类型？工作内容？主观上全栈好还是图形ta方向好还是客户端+AI还是做好客户端就行了更新速度已经很快了？其他问题有机会跟hr聊
测开能转开发吗？测开设计引擎开发的工作吗比如渲染性能、物理性能、画面表现测试，总的来说能学到引擎相关的知识吗？

部门
加班情况
是否开展内部技术分享 频率

ue项目还是unity项目
unity目前统治地位，近年开始会往ue倾斜同意吗

# 秋招记录

## 提前批

vivo--软开后端--offer白菜
广联达--图形开发--offer九月谈
字节绿洲--引擎--三面负责人挂  
字节飞书--客户端--一面挂
字节无双--引擎--一面挂
Unity--TA实习--面试挂
猿辅导--客户端--笔试挂  8.22还有一次笔试--未投
网易雷火--笔试完
网易有道--二面8.24--k12教育部门差不考虑

## 正式批

祖龙--等二面 面试官是程序五部 足球类型 万物觉醒 slg 有引擎中台--没消息了  
字节--游戏客户端--8.10已投--笔试挂
    --游戏引擎--9.2已投--笔试挂
    --头条客户端--面试挂
腾讯魔方--游戏客户端--8.10已投8.23笔试8.24光子一面挂  
    反馈意见：对开发方面的兴趣浓厚，有一定的动手实践经验，并且具备一定的图形渲染方面的知识，沟通能力很好。不足之处在操作系统计算机网络等底层知识上，实践的项目功能还比较简单，不能展现代码设计能力。推荐加上的方向是，补充计算机专业课程的积累，开发功能很复杂的项目，展现出更优秀的代码设计能力，或者再图形渲染等领域有更深的研究展现出更大的亮点，不只是掌握基础的内容。  
    --游戏引擎--9.2已投--9.6笔试
快手--游戏客户端--8.5已投--9.9一面--没消息了
爱奇艺--游戏客户端--8.16已投8.22笔试很简单--没消息了
百度--c++--8.16已投--一面结束，岗位偏后端不合适
贝壳--ue4引擎开发--8.16已投要求dx11api--如视，新团队，第一年校招，有技术大佬，--9.11一面
网易互娱--游戏引擎游戏研发--8.17已投--9.5笔试--9.14一面--挂
美团--测开--8.22笔试--8.31一面--美团优选移动端app测开--挂
小米--Unity--8.20已投--9.8笔试--一二面--三消小游戏
完美世界--8.25笔试--9.4一面 第五项目组 多项目mmo、卡牌 面试官一个是做编辑器工具的
    --9.10二面--9.11hr面  
    常规业务开发培训（客户端、服务端）一年-三个月==》美术工作流梳理，相关工具，美术资源，场景==》综合能力，设计规范；==》  
    60程序，三个线上项目神雕 神魔大路，三个在研ip产品；项目中信300人，重度mmo  

乐元素海淀--9.27已投

中国银行--五个志愿--已投--9.26笔试
农业银行--总行软开--已投--8.29笔试-线上一面-9.23二面--体检
建设银行--已投 建行大学&&网络金融部
* 机构业务部
* 同业业务中心
* 结算与现金管理部
* 网络金融部
* 住房金融与个人信贷部
工商银行--数据中心、牡丹卡中心、业务研发中心  
邮储--已投总行两部门

国家开发银行--9.27已投
中信银行--9.20已投
中国移动--9.15已投--9.26笔试冲突没参加
中国电信--未投
中国石油--9.21
光大信息科技--9.27已投
中国人寿--9.29已投
中国人保
平安人寿



## offers

秋招：
* vivo软件工程师（后端）-深圳-白菜24-已拒  
* 广联达图形开发-北京-25.5
* 核钛-四惠-项目好做完就走
* 完美-19*14
* 快手-40w
* 农行-25w到32w-3到5年升p7


# todolist

profiler使用  
unity渲染线程 主线程 用户层面多线程以提升效率  
编译优化  
linux C++开发  
哪些是在构造函数里初始化的  
rmsl  

# 企业列表

[资源链接](https://www.nowcoder.com/discuss/364482)

| 领域                   | 名称                               | 网址                                     | 备注                                            |
| ---------------------- | ---------------------------------- | ---------------------------------------- | ----------------------------------------------- |
| 监管机关               | 中国人民银行                       |                                          | 软件开发、信用卡中心 |
|                        | 银监会                             |                                          |
|                        | 保监会                             |                                          |
|                        | 证监会                             |                                          |
| 政策性银行             | 国家开发银行                       |                                          |
|                        | 进出口银行                         |                                          |
|                        | 中国农业发展银行                   |                                          |
| 国有银行和商业银行     | 中国银行                           |                                          |
|                        | 中国农业银行                       |                                          |
|                        | 中国工商银行                       |                                          |
|                        | 中国建设银行                       |                                          |
|                        | 中国邮政                           |                                          |
|                        | 招商银行                           |                                          |
|                        | 平安                               |                                          |
|                        | 浦发                               |                                          |
|                        | 广发                               |                                          |
|                        | 中信                               |                                          |
| 外资银行               | 汇丰银行                           |                                          |
|                        | 渣打银行                           |                                          |
| 金融结算，交易服务     | 中国银联总部                       |                                          |
|                        | 中国网联                           |                                          |
|                        | 银联商务                           |                                          |
|                        | （上海、深圳）证券交易所           |                                          |
|                        | 中国人民银行清算中心               |                                          |
| 证券公司               | 华泰联合证券                       |                                          |
|                        |中金 中信 中信建投 华泰              |                                         |
|                        | 广发证券                           |                                          |
| 电力                   | 国家电网                           |[link](https://zhaopin.sgcc.com.cn/unitInfo.html?obj_id=00994041&particulars=true) |提前批会很早 第一批在11月份 牛客为什么有人十月底就拿到offer了。。有考试大纲、刷题多长时间？
|                        | 国家电网科学院（南瑞集团）         |                                          |
|                        | 电网子公司                         |                                          |
| 发电（四大集团）       | 大唐集团科学院                     |                                          |
|                        | 华润集团                           |                                          |
|                        | 神华集团                           |                                          |
|                        | 中国核电                           |                                          |
| 医院                   |                                    |                                          |
| 铁路，航空公司         | 铁路局，中国铁道科学院，航空公司， |                                          |
| 汽车                   |                                    |                                          |
| 三大运营商及其通信公司 | 联通软件研究院                     |                                          |
|                        | 中移互联网/中移在线                |                                          |
|                        | 电信                               |                                          |
| 外企/互联网公司        | Google                             |                                          |
|                        | IBM                                |                                          |
|                        | ORACLE                             |                                          |
|                        | 微软                               |                                          |
|                        | 红帽                               |                                          |
|                        | 万革始                             |                                          |
|                        | SAP                                |                                          |
|                        | intel                              |                                          |
|                        | ThoughtWorks                       |                                          |
|                        | 三星                               |                                          |
|                        | 华为                               |                                          |
| 一线                   | 百度                              |                                          |
|                        | 阿里                                |                                          |
|                        | 腾讯                               |                                          |
|                        | 字节                               |                                          |
|                        | 快手                                |                                          |
|                        | ...                                |                                          |
| 二线                   | 去哪儿                             |                                          |
|                        | 携程                               |                                          |
|                        | 京东                                |                                          |
|                        | 微博                                |                                          |
|                        | ...                                |                                          |
| 三线                   | 一个app撑一个公司                  |                                          |
| 创业公司               | 画饼                               |                                          |
| 独角兽                 | 商汤                               |                                          |
| 传统/制造业            | 旷视科技                           |                                          |
|                        | 深信服                             |                                          |
|                        | 新华三等                           |                                          |
|                        | 浪潮集团                           |                                          |
|                        | 龙湖地产科技部                     |                                          |
|                        | 顺丰科技                           |                                          |
|                        | 大疆科技                           |                                          |
|                        | 格力电器                           |                                          |
| 事业单位               | 国家统计局                         | http://www.stats.gov.cn/zjtj/gjtjj/jgsz/ | 考生在规定的报名时间内(自公告发布之日至4月10日) |

游戏公司：  
字节、快手、畅游、祖龙、完美、光宇  
外地：网易、腾讯、字节、米哈游、unity
没听说过的：  
聚力维度：ai+unity+vr/ar 创业公司


